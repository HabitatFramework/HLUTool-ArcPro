<UserControl x:Class="HLU.UI.View.WindowMain"
             x:Name="MainUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:local="clr-namespace:HLU.UI.ViewModel"
             xmlns:extensions="clr-namespace:ArcGIS.Desktop.Extensions;assembly=ArcGIS.Desktop.Extensions"
             xmlns:controls="clr-namespace:ArcGIS.Desktop.Framework.Controls;assembly=ArcGIS.Desktop.Framework"
             xmlns:viewModel="clr-namespace:HLU.UI.ViewModel"
             d:DataContext="{d:DesignInstance Type=local:ViewModelWindowMain}"
             xmlns:view="clr-namespace:HLU.UI.View"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="300">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <extensions:DesignOnlyResourceDictionary Source="pack://application:,,,/ArcGIS.Desktop.Framework;component\Themes\Default.xaml" />
                <ResourceDictionary Source="Dictionary\CodeDescriptionConverterDictionary.xaml" />
                <ResourceDictionary Source="Dictionary\CodeNameDescriptionConverterDictionary.xaml" />
                <ResourceDictionary Source="Dictionary\VagueDateConverterDictionary.xaml" />
                <ResourceDictionary Source="Dictionary\ErrorMessageConverterDictionary.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <DockPanel Width="Auto"
               Margin="0,0,0,0"
               HorizontalAlignment="Stretch"
               VerticalAlignment="Stretch"
               Cursor="{Binding WindowCursor}">

        <Grid x:Name="GridMain" Visibility="{Binding DockpaneVisibility}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!--  GroupBoxTopControlsBulkUpdate  -->
            <GroupBox x:Name="GroupBoxTopControlsBulkUpdate"
                      Grid.Row="0"
                      Grid.Column="0"
                      Header="{Binding Path=TopControlsBulkUpdateGroupHeader}"
                      Visibility="{Binding Path=ShowInBulkUpdateMode}">
                <Grid x:Name="GridTopControlsBulkUpdate"
                      Grid.Row="0"
                      Margin="0,0,0,0"
                      Panel.ZIndex="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <Grid x:Name="GridBulkRecordCounts"
                          Grid.Row="0"
						  Grid.RowSpan="2"
                          HorizontalAlignment="Stretch"
                          VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="100"/>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="100"/>
                        </Grid.ColumnDefinitions>

                        <Label x:Name="LabelBulkUpdateStatusIncidDB"
                           Grid.Row="0"
                           Grid.Column="0"
                           Margin="0,0,0,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="Database INCIDs" />
                        <TextBox x:Name="TextBoxBulkUpdateStatusIncidDB"
                             Grid.Row="0"
                             Grid.Column="1"
                             Margin="0,0,0,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding NumIncidSelectedDB,
                                            Mode=OneWay}"
                             TextAlignment="Left" />

                        <Label x:Name="LabelBulkUpdateStatusToidDB"
                           Grid.Row="1"
                           Grid.Column="0"
                           Margin="0,0,0,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="Database TOIDs" />
                        <TextBox x:Name="TextBoxBulkUpdateStatusToidDB"
                             Grid.Row="1"
                             Grid.Column="1"
                             Margin="0,0,6,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding NumToidSelectedDB,
                                            Mode=OneWay}"
                             TextAlignment="Left" />

                        <Label x:Name="LabelBulkUpdateStatusFragDB"
                           Grid.Row="2"
                           Grid.Column="0"
                           Margin="0,0,0,2"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="Database Fragments" />
                        <TextBox x:Name="TextBoxBulkUpdateStatusFragDB"
                             Grid.Row="2"
                             Grid.Column="1"
                             Margin="0,0,0,2"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding NumFragmentsSelectedDB,
                                            Mode=OneWay}"
                             TextAlignment="Left" />

                        <Label x:Name="LabelBulkUpdateStatusMap"
                           Grid.Row="0"
                           Grid.Column="2"
                           Margin="0,0,0,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="Map INCIDs" />
                        <TextBox x:Name="TextBoxBulkUpdateStatusIncidMap"
                             Grid.Row="0"
                             Grid.Column="3"
                             Margin="0,0,0,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding NumIncidSelectedMap,
                                            Mode=OneWay,
											ValidatesOnDataErrors=True}"
							 TextAlignment="Left"
							 Tag="ErrorContent"
							 ToolTipService.ShowOnDisabled="True" />

                        <Label x:Name="LabelBulkUpdateStatusToidMap"
                           Grid.Row="1"
                           Grid.Column="2"
                           Margin="0,0,0,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="Map TOIDs" />
                        <TextBox x:Name="TextBoxBulkUpdateStatusToidMap"
                             Grid.Row="1"
                             Grid.Column="3"
                             Margin="8,0,8,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding NumToidSelectedMap,
                                            Mode=OneWay,
											ValidatesOnDataErrors=True}"
                             TextAlignment="Left"
							 Tag="ErrorContent"
							 ToolTipService.ShowOnDisabled="True" />
                        <Label x:Name="LabelBulkUpdateStatusFragMap"
                           Grid.Row="2"
                           Grid.Column="2"
                           Margin="0,0,0,2"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="Map Fragments" />
                        <TextBox x:Name="TextBoxBulkUpdateStatusFragMap"
                             Grid.Row="2"
                             Grid.Column="3"
                             Margin="0,0,6,2"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding NumFragmentsSelectedMap,
                                            Mode=OneWay,
											ValidatesOnDataErrors=True}"
                             TextAlignment="Left"
							 Tag="ErrorContent"
							 ToolTipService.ShowOnDisabled="True" />
                    </Grid>
                </Grid>
            </GroupBox>

            <!--  GroupBoxTopControls  -->
            <GroupBox x:Name="GroupBoxTopControls"
                      Grid.Row="0"
                      Grid.Column="0"
                      Margin="2,0,2,0"
                      Header="{Binding Path=TopControlsGroupHeader}"
                      Visibility="{Binding Path=HideInBulkUpdateMode}">
                <Grid x:Name="GridTopControls"
                      Grid.Row="0"
                      Margin="0,0,0,0"
                      Panel.ZIndex="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" MinWidth="90" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <Label x:Name="LabelIncid"
                           Grid.Row="0"
                           Grid.Column="0"
                           Margin="0,0,0,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="INCID" />
                    <TextBox x:Name="TextBoxIncid"
                             Grid.Row="0"
                             Grid.Column="1"
                             Margin="0,0,0,4"
							 MinWidth="80"
                             VerticalAlignment="Center"
                             IsReadOnly="True"
                             Text="{Binding Path=Incid,
                                            Mode=OneWay,
                                            ValidatesOnDataErrors=False}" />

                    <Grid x:Name="GridIncidAttributes"
                          Grid.Row="0"
                          Grid.Column="2"
                          Grid.ColumnSpan="3">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <Label x:Name="LabelIncidArea"
                               Grid.Row="0"
                               Grid.Column="0"
                               Margin="6,0,0,4"
                               HorizontalAlignment="Right"
                               VerticalAlignment="Center"
                               Content="Area [ha]" />
                        <TextBox x:Name="TextBoxIncidArea"
                                 Grid.Row="0"
                                 Grid.Column="1"
                                 Margin="0,0,0,4"
                                 VerticalAlignment="Center"
                                 IsEnabled="False"
                                 IsReadOnly="True"
                                 Text="{Binding IncidArea,
                                                Mode=OneWay,
                                                ValidatesOnDataErrors=False}"
                                 TextAlignment="Right" />
                        <Label x:Name="LabelIncidLength"
                               Grid.Row="0"
                               Grid.Column="2"
                               Margin="6,0,0,4"
                               HorizontalAlignment="Right"
                               VerticalAlignment="Center"
                               Content="Length [km]" />
                        <TextBox x:Name="TextBoxIncidLength"
                                 Grid.Row="0"
                                 Grid.Column="3"
                                 Margin="0,0,6,4"
                                 VerticalAlignment="Center"
                                 IsEnabled="False"
                                 IsReadOnly="True"
                                 Text="{Binding IncidLength,
                                                Mode=OneWay,
                                                ValidatesOnDataErrors=False}"
                                 TextAlignment="Right" />
                    </Grid>

                    <Label x:Name="LabelIncidCreatedDate"
                           Grid.Row="1"
                           Grid.Column="0"
                           Margin="8,0,0,4"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center">
                        Created
                    </Label>
                    <TextBox x:Name="TextBoxIncidCreatedDate"
                             Grid.Row="1"
                             Grid.Column="1"
                             Grid.ColumnSpan="2"
                             Margin="0,0,0,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding IncidCreatedDate,
                                            Mode=OneWay,
                                            ValidatesOnDataErrors=False}"
                             TextAlignment="Left" />

                    <Label x:Name="LabelIncidCreatedUser"
                           Grid.Row="1"
                           Grid.Column="3"
                           Margin="6,0,0,4"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Center">
                        By
                    </Label>
                    <TextBox x:Name="TextBoxIncidCreatedUser"
                             Grid.Row="1"
                             Grid.Column="4"
                             Margin="0,0,6,4"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding IncidCreatedUser,
                                            Mode=OneWay,
                                            ValidatesOnDataErrors=False}"
                             TextAlignment="Left" />

                    <Label x:Name="LabelIncidLastModDate"
                           Grid.Row="2"
                           Grid.Column="0"
                           Margin="0,0,0,0"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center">
                        Modified
                    </Label>
                    <TextBox x:Name="TextBoxIncidLastModDate"
                             Grid.Row="2"
                             Grid.Column="1"
                             Grid.ColumnSpan="2"
                             Margin="0,0,0,0"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding IncidLastModifiedDate,
                                            Mode=OneWay,
                                            ValidatesOnDataErrors=False}"
                             TextAlignment="Left" />

                    <Label x:Name="LabelIncidLastModUser"
                           Grid.Row="2"
                           Grid.Column="3"
                           Margin="6,0,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Center">
                        By
                    </Label>
                    <TextBox x:Name="TextBoxIncidLastModUser"
                             Grid.Row="2"
                             Grid.Column="4"
                             Margin="0,0,6,0"
                             VerticalAlignment="Center"
                             IsEnabled="False"
                             IsReadOnly="True"
                             Text="{Binding IncidLastModifiedUser,
                                            Mode=OneWay,
                                            ValidatesOnDataErrors=False}"
                             TextAlignment="Left" />

                </Grid>
            </GroupBox>

            <!--  TabControlData  -->
            <TabControl x:Name="TabControlData"
                        Grid.Row="1"
                        Grid.Column="0"
                        Margin="0,0,0,0"
                        IsEnabled="{Binding TabControlDataEnabled}"
						SelectedIndex="{Binding TabItemSelected, Mode=TwoWay}">

                <!--  TabItemHabitat  -->
                <TabItem x:Name="TabItemHabitat"
                         Height="24"
                         VerticalAlignment="Bottom"
                         IsEnabled="{Binding TabItemHabitatEnabled}">

                    <TabItem.Header>
                        <StackPanel>
                            <Label x:Name="HabitatTabLabel"
                                   Margin="0,0,0,0"
                                   VerticalAlignment="Bottom"
                                   Content="{Binding HabitatTabLabel,
                                                     ValidatesOnDataErrors=True}"
                                   FontSize="12"
                                   FontWeight="Medium"
                                   Padding="0,0,0,0"
                				   Tag="{Binding (Validation.Errors).CurrentItem.ErrorContent, Converter={StaticResource errorMessageConverter}, Mode=OneWay, RelativeSource={RelativeSource Self}}"
                				   ToolTipService.ShowOnDisabled="True" />
                        </StackPanel>
                    </TabItem.Header>

                    <AdornerDecorator>
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <Grid x:Name="GridTabItemHabitat">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" MinHeight="8" />
                                    <RowDefinition Height="Auto" MinHeight="8" />
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="Auto" MinHeight="8" />
                                    <RowDefinition Height="Auto" MinHeight="8" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="19*" />
                                    <ColumnDefinition Width="439*" />
                                    <ColumnDefinition Width="6*" />
                                    <ColumnDefinition Width="20" />
                                </Grid.ColumnDefinitions>

                                <!--  GroupBoxHabitatCategories  -->
                                <GroupBox x:Name="GroupBoxHabitatCategories"
                                          Grid.Row="0"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="4"
                                          VerticalAlignment="Stretch"
										  IsEnabled="{Binding TabHabitatControlsEnabled}"
                                          Header="{Binding HabitatHeader}"
                                          Visibility="{Binding Path=ShowSourceHabitatGroup}">
                                    <Grid x:Name="GridCategories">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" MinWidth="80" />
                                            <ColumnDefinition Width="358*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelHabitatClass"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0,0,0,2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Habitat Class" />
                                        <ComboBox x:Name="ComboBoxHabitatClass"
                                                  Grid.Row="0"
                                                  Grid.Column="1"
                                                  Margin="0,0,0,2"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding HabitatClassCodes,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding HabitatClass}"
                                                  SelectedValuePath="code"
                                                  ToolTipService.ShowOnDisabled="True" />

                                        <Label x:Name="LabelHabitatType"
                                               Grid.Row="1"
                                               Grid.Column="0"
                                               Margin="0,2,0,0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Habitat Type" />
                                        <ComboBox x:Name="ComboBoxHabitatType"
                                                  Grid.Row="1"
                                                  Grid.Column="1"
                                                  Margin="0,2,0,0"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding HabitatTypeCodes,
                                                                        ConverterParameter=code^name^description^sort_order,
                                                                        Converter={StaticResource codeNameDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding HabitatType,
                                                                          ConverterParameter=code^name^description^sort_order,
                                                                          Converter={StaticResource codeNameDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="ErrorContent"
                                                  ToolTipService.ShowOnDisabled="True" />
                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxPrimary  -->
                                <GroupBox x:Name="GroupBoxPrimary"
                                          Grid.Row="1"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="4"
                                          VerticalAlignment="Stretch"
										  IsEnabled="{Binding TabHabitatControlsEnabled}"
                                          Header="{Binding PrimaryHeader}">
                                    <Grid x:Name="GridPrimary">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" MinWidth="80" />
                                            <ColumnDefinition Width="358*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>
                                        <Label x:Name="LabelPrimary"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0,0,0,2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Primary" />
                                        <ComboBox x:Name="ComboBoxPrimary"
                                                  Grid.Row="0"
                                                  Grid.Column="1"
                                                  Margin="0,0,0,2"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding PrimaryEnabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding PrimaryCodes,
                                                                        ConverterParameter=code^description^sort_order,
                                                                        Converter={StaticResource codeDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding IncidPrimary,
                                                                          ConverterParameter=code^description^sort_order,
                                                                          Converter={StaticResource codeDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="ErrorContent"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyPrimary"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  Margin="0,0,0,2"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidPrimary,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelNvcCodes"
                                               Grid.Row="1"
                                               Grid.Column="0"
                                               Margin="0,2,0,0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="NVC Codes"
                                               Visibility="{Binding Path=ShowNVCCodes}" />
                                        <TextBox x:Name="TextBoxNvcCodes"
                                                 Grid.Row="1"
                                                 Grid.Column="1"
                                                 Height="22"
                                                 Margin="0,2,0,0"
                                                 BorderBrush="Black"
                                                 BorderThickness="1"
                                                 VerticalAlignment="Center"
                                                 IsEnabled="False"
                                                 Text="{Binding NvcCodes,
                                                                Mode=OneWay}"
                                                 Visibility="{Binding Path=ShowNVCCodes}"
						                         ToolTip="{Binding NvcCodes}"
                                                 ToolTipService.ShowOnDisabled="True" />
                                    </Grid>
                                </GroupBox>

                                <GroupBox x:Name="GroupBoxSecondaryHabitats"
                                          Grid.Row="2"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="4"
                                          VerticalAlignment="Stretch"
										  IsEnabled="{Binding TabHabitatControlsEnabled}"
                                          Header="{Binding SecondaryHabitatsHeader}">
                                    <Grid x:Name="GridSecondaryHabitats" Margin="0,2,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto "/>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" MinWidth="80" />
                                            <ColumnDefinition Width="358*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelHabitatSecondariesMandatory"
												Grid.Row="0"
												Grid.Column="0"
												Margin="0,0,0,2"
												HorizontalAlignment="Right"
												VerticalAlignment="Center"
												Content="Mandatory"
												Visibility="Visible" />
                                        <TextBox x:Name="TextBoxHabitatSecondariesMandatory"
													Grid.Row="0"
													Grid.Column="1"
                                                    Height="22"
													Margin="0,0,0,2"
													VerticalAlignment="Center"
													IsEnabled="False"
            										IsReadOnly="True"
													Text="{Binding HabitatSecondariesMandatory,
												    Mode=OneWay,
												    ValidatesOnDataErrors=True}"
													Visibility="Visible"
													Tag="ErrorContent"
													ToolTipService.ShowOnDisabled="True" />

                                        <Label x:Name="LabelHabitatSecondariesSuggested"
                                               Grid.Row="1"
                                               Grid.Column="0"
                                               Margin="0,2,0,2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Suggested"
                                               Visibility="{Binding Path=ShowHabitatSecondariesSuggested}" />
                                        <TextBox x:Name="TextBoxHabitatSecondariesSuggested"
                                                 Grid.Row="1"
                                                 Grid.Column="1"
                                                 Height="22"
                                                 Margin="0,2,0,2"
                                                 VerticalAlignment="Center"
                                                 IsEnabled="False"
                                                 Text="{Binding HabitatSecondariesSuggested,
                                                                Mode=OneWay}"
                                                 Visibility="{Binding Path=ShowHabitatSecondariesSuggested}"
						                         ToolTip="{Binding HabitatTips}"
                                                 ToolTipService.ShowOnDisabled="True" />

                                        <Grid x:Name="GridAddSecondaryHabitat"
                                              Grid.Row="2"
                                              Grid.Column="0"
											  Grid.ColumnSpan="2">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="140" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>

                                            <!--<Label x:Name="LabelSecondaryGroup"
												   Grid.Row="0"
												   Grid.Column="0"
                                                   Margin="0,8,0,4"
                                                   HorizontalAlignment="Right"
                                                   VerticalAlignment="Center"
                                                   Content="Group" />-->
                                            <ComboBox x:Name="ComboBoxSecondaryGroup"
                                                      Grid.Row="0"
                                                      Grid.Column="0"
                                                      Margin="0,4,0,2"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
													  IsEnabled="{Binding SecondaryGroupEnabled}"
                                                      IsEditable="True"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding SecondaryGroupCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedValue="{Binding SecondaryGroup}"
                                                      SelectedValuePath="code"
                                                      ToolTipService.ShowOnDisabled="True" />

                                            <!--<Label x:Name="LabelSecondaryHabitat"
                                                   Grid.Row="0"
                                                   Grid.Column="2"
                                                   Margin="0,2,0,4"
                                                   HorizontalAlignment="Right"
                                                   VerticalAlignment="Center"
                                                   Content="Code" />-->
                                            <ComboBox x:Name="ComboBoxSecondaryHabitat"
                                                      Grid.Row="0"
                                                      Grid.Column="1"
                                                      Margin="4,4,6,2"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
													  IsEnabled="{Binding SecondaryHabitatEnabled}"
                                                      IsEditable="True"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding SecondaryHabitatCodes,
                                                                        ConverterParameter=code^description^sort_order,
                                                                        Converter={StaticResource codeDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedValue="{Binding SecondaryHabitatCode,
                                                                          ConverterParameter=code^description^sort_order,
                                                                          Converter={StaticResource codeDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="ErrorContent"
													  ToolTip="{Binding Path=SelectedItem.description, RelativeSource={RelativeSource Self}}"
                                                      ToolTipService.ShowOnDisabled="True" />
                                        </Grid>

                                        <!--  ButtonAddSecondaryHabitat  -->
                                        <Button x:Name="ButtonAddSecondaryHabitat"
												Grid.Row="2"
												Grid.Column="2"
                                                MinWidth="0"
												Width="20"
                                                MinHeight="0"
                                                Height="20"
												Margin="0,5,0,0"
                                                Padding="0,0,0,0"
												HorizontalAlignment="Right"
												VerticalAlignment="Top"
												Command="{Binding AddSecondaryHabitatCommand}"
												IsEnabled="{Binding CanAddSecondaryHabitat}"
												ToolTip="Add Secondary Habitat"
												ToolTipService.ShowOnDisabled="True"
                                                Style="{DynamicResource Esri_Button}">
                                            <Image Source="{Binding Path=ButtonAddSecondaryHabitatImg}" Width="16" Height="16" />
                                        </Button>

                                        <!-- <ScrollViewer VerticalScrollBarVisibility="Auto"> -->
                                        <DataGrid x:Name="DataGridSecondaryHabitats"
                                                       Grid.Row="3"
                                                       Grid.Column="0"
                                                       Grid.ColumnSpan="2"
                                                       Margin="0,4,6,0"
                                                       AutoGenerateColumns="False"
                                                       BorderBrush="Black"
                                                       BorderThickness="1"
                                                       CanUserAddRows="False"
                                                       CanUserDeleteRows="True"
                                                       CanUserReorderColumns="False"
                                                       CanUserResizeColumns="True"
                                                       CanUserSortColumns="False"
                                                       HeadersVisibility="All"
                                                       IsEnabled="{Binding SecondaryHabitatsEnabled}"
                                                       ItemsSource="{Binding IncidSecondaryHabitats}"
                                                       MinRowHeight="24"
                                                       Padding="2,0"
													   MinHeight="116"
													   VerticalScrollBarVisibility="Auto"
                                                       RowDetailsVisibilityMode="Visible"
                                                       RowHeaderWidth="20"
                                                       RowHeight="24"
                                                       Style="{DynamicResource Esri_DataGrid}">
                                            <DataGrid.RowValidationRules>
                                                <DataErrorValidationRule />
                                            </DataGrid.RowValidationRules>
                                            <DataGrid.Columns>
                                                <DataGridTextColumn Binding="{Binding secondary_id}"
                                                                         Header="secondary_id"
                                                                         IsReadOnly="True"
                                                                         Visibility="Collapsed" />
                                                <DataGridTextColumn Binding="{Binding incid}"
                                                                         Header="INCID"
                                                                         IsReadOnly="True"
                                                                         Visibility="Collapsed" />
                                                <DataGridComboBoxColumn x:Name="DataGridComboBoxSecondaryGroup"
                                                                        Width="117"
																					   IsReadOnly="True"
                                                                                       CanUserResize="True"
                                                                                       DisplayMemberPath="description"
                                                                                       Header="Group"
                                                                                       SelectedValueBinding="{Binding secondary_group,
                                                                                                                      ConverterParameter=code^description^sort_order,
                                                                                                                      Converter={StaticResource codeDescriptionConverter},
                                                                                                                      UpdateSourceTrigger=PropertyChanged,
                                                                                                                      ValidatesOnDataErrors=True}"
                                                                                       SelectedValuePath="code" />
                                                <!-- EditingElementStyle="{DynamicResource ComboBoxStyle}" -->
                                                <!-- Visibility="{Binding ShowSecondaryGroupColumn}" -->
                                                <DataGridComboBoxColumn x:Name="DataGridComboBoxSecondaryCode"
                                                                        Width="*"
																					   IsReadOnly="True"
                                                                                       CanUserResize="True"
                                                                                       DisplayMemberPath="description"
                                                                                       Header="Code"
																					   SortDirection="Ascending"
                                                                                       SelectedValueBinding="{Binding secondary_habitat,
                                                                                                                      ConverterParameter=code^description^sort_order,
                                                                                                                      Converter={StaticResource codeDescriptionConverter},
                                                                                                                      UpdateSourceTrigger=PropertyChanged,
                                                                                                                      ValidatesOnDataErrors=True}"
                                                                                       SelectedValuePath="code" />
                                                <!-- EditingElementStyle="{DynamicResource ComboBoxStyle}" -->
                                            </DataGrid.Columns>
                                        </DataGrid>
                                        <!-- </ScrollViewer> -->

                                        <!--  ButtonAddSecondaryHabitatList  -->
                                        <Button x:Name="ButtonAddSecondaryHabitatList"
												Grid.Row="3"
												Grid.Column="2"
                                                MinWidth="0"
												Width="20"
                                                MinHeight="0"
                                                Height="20"
                                                Padding="0"
												Margin="0,5,0,0"
												HorizontalAlignment="Right"
												VerticalAlignment="Top"
												Command="{Binding AddSecondaryHabitatListCommand}"
												IsEnabled="{Binding CanAddSecondaryHabitatList}"
												ToolTip="Add Secondary Habitats from List"
												ToolTipService.ShowOnDisabled="True"
                                                Style="{DynamicResource Esri_Button}">
                                            <Image Source="{Binding Path=ButtonAddSecondaryHabitatListImg}" Width="16" Height="16" />
                                        </Button>

                                        <CheckBox x:Name="CheckBoxCopySecondaryHabitats"
                                                  Grid.Row="3"
                                                  Grid.Column="2"
                                                  Margin="0,0,0,0"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSecondaryHabitats,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}"
                                                  IsEnabled="{Binding SecondaryHabitatsEnabled}" />
                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxSecondarySummary  -->
                                <GroupBox x:Name="GroupBoxSecondarySummary"
                                          Grid.Row="3"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="4"
                                          VerticalAlignment="Stretch"
										  IsEnabled="{Binding TabHabitatControlsEnabled}"
                                          Header="{Binding SecondarySummaryHeader}"
                                          Visibility="{Binding Path=ShowHabitatSummary}">
                                    <Grid x:Name="GridSecondaries" Margin="0,0,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" MinWidth="80" />
                                            <ColumnDefinition Width="358*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelSecondarySummary"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0,2,0,0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Summary" />
                                        <TextBox x:Name="TextBoxSecondarySummary"
                                                 Grid.Row="0"
                                                 Grid.Column="1"
                                                 Margin="0,2,0,0"
                                                 VerticalAlignment="Center"
                                                 IsReadOnly="True"
                                                 Text="{Binding IncidSecondarySummary, Mode=OneWay}" />
                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxLegacy  -->
                                <GroupBox x:Name="GroupBoxLegacy"
                                          Grid.Row="4"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="4"
                                          VerticalAlignment="Stretch"
										  IsEnabled="{Binding TabHabitatControlsEnabled}"
                                          Header="{Binding LegacyHeader}">
                                    <!-- Margin="0" -->
                                    <Grid x:Name="GridLegacy" Margin="0,2,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" MinWidth="80" />
                                            <ColumnDefinition Width="358*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelLegacyHabitat"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Legacy Hab." />
                                        <ComboBox x:Name="ComboBoxLegacyHabitat"
                                                  Grid.Row="0"
                                                  Grid.Column="1"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding LegacyHabitatCodes,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding IncidLegacyHabitat,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="ErrorContent"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyLegacyHabitat"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidLegacyHabitat,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </ScrollViewer>
                    </AdornerDecorator>

                </TabItem>

                <!--  TabItemIHS  -->
                <TabItem x:Name="TabItemIHS"
                         IsEnabled="{Binding TabItemIHSEnabled}"
						 Visibility="{Binding ShowIHSTab}">

                    <TabItem.Header>
                        <StackPanel>
                            <Label x:Name="IHSTabLabel"
                                   Margin="4,0,4,0"
                                   VerticalAlignment="Bottom"
                                   Content="{Binding IHSTabLabel}"
                                   FontSize="12"
                                   FontWeight="Medium"
                                   Padding="0,0,0,0"
                				   Tag="{Binding (Validation.Errors).CurrentItem.ErrorContent, Converter={StaticResource errorMessageConverter}, Mode=OneWay, RelativeSource={RelativeSource Self}}"
                				   ToolTipService.ShowOnDisabled="True" />
                        </StackPanel>
                    </TabItem.Header>

                    <AdornerDecorator>
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <Grid x:Name="GridTabItemIHS">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="1.2*" MinHeight="4" />
                                    <RowDefinition Height="2.7*" MinHeight="11" />
                                    <RowDefinition Height="2*" MinHeight="8" />
                                    <RowDefinition Height="2*" MinHeight="8" />
                                    <RowDefinition Height="2*" MinHeight="8" />
                                    <RowDefinition Height="1.2*" MinHeight="4" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <!--  GroupBoxIhsHabitat  -->
                                <GroupBox x:Name="GroupBoxIhsHabitat"
                                          Grid.Row="0"
                                          Grid.Column="0"
                                          VerticalAlignment="Stretch"
										  IsEnabled="{Binding TabIhsControlsEnabled}"
                                          Header="{Binding IhsHabitatHeader}">

                                    <Grid x:Name="GridIHSHabitat" Margin="0,2,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition MinWidth="70" />
                                            <ColumnDefinition Width="378*" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelIhsHabitat"
                                               Grid.Row="2"
                                               Grid.Column="0"
                                               Margin="0,2,0,4"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Habitat" />
                                        <TextBox x:Name="TextBoxIhsHabitat"
                                                  Grid.Row="2"
                                                  Grid.Column="1"
                                                  Margin="0,2,2,4"
                                                  VerticalAlignment="Center"
                                                  IsEnabled="False"
                                                  IsReadOnly="True"
                                                  Text="{Binding IncidIhsHabitatText, Mode=OneWay}"
                                                  ToolTipService.ShowOnDisabled="True" />
                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxIhsMatrix  -->
                                <GroupBox x:Name="GroupBoxIhsMatrix"
                                          Grid.Row="1"
                                          Grid.Column="0"
										  IsEnabled="{Binding TabIhsControlsEnabled}"
                                          Header="{Binding IhsMatrixHeader}">
                                    <Grid x:Name="GridIhsMatrix" Margin="0,2,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition MinWidth="70" />
                                            <ColumnDefinition Width="378*" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelIhsMatrix1"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0,2,0,4"
                                               Padding="0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Matrix 1" />
                                        <TextBox x:Name="TextBoxIhsMatrix1"
                                                  Grid.Row="0"
                                                  Grid.Column="1"
                                                  Margin="4,2,0,4"
                                                  VerticalAlignment="Center"
                                                  IsEnabled="False"
                                                  IsReadOnly="True"
                                                  Text="{Binding IncidIhsMatrix1Text, Mode=OneWay}"
                                                  ToolTipService.ShowOnDisabled="True" />

                                        <Label x:Name="LabelIhsMatrix2"
                                               Grid.Row="1"
                                               Grid.Column="0"
                                               Margin="0,2,0,4"
                                               Padding="0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Matrix 2" />
                                        <TextBox x:Name="TextBoxIhsMatrix2"
                                                  Grid.Row="1"
                                                  Grid.Column="1"
                                                  Margin="4,2,0,4"
                                                  VerticalAlignment="Center"
                                                  IsEnabled="False"
                                                  IsReadOnly="True"
                                                  Text="{Binding IncidIhsMatrix2Text, Mode=OneWay}"
                                                  ToolTipService.ShowOnDisabled="True" />

                                        <Label x:Name="LabelIhsMatrix3"
                                               Grid.Row="2"
                                               Grid.Column="0"
                                               Margin="0,2,0,4"
                                               Padding="0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Matrix 3" />
                                        <TextBox x:Name="TextBoxIhsMatrix3"
                                                  Grid.Row="2"
                                                  Grid.Column="1"
                                                  Margin="4,2,0,4"
                                                  VerticalAlignment="Center"
                                                  IsEnabled="False"
                                                  IsReadOnly="True"
                                                  Text="{Binding IncidIhsMatrix3Text, Mode=OneWay}"
                                                  ToolTipService.ShowOnDisabled="True" />

                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxIhsFormation  -->
                                <GroupBox x:Name="GroupBoxIhsFormation"
                                          Grid.Row="2"
                                          Grid.Column="0"
										  IsEnabled="{Binding TabIhsControlsEnabled}"
                                          Header="{Binding IhsFormationHeader}">
                                    <Grid x:Name="GridIhsFormation" Margin="0,2,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition MinWidth="70" />
                                            <ColumnDefinition Width="378*" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelIhsFormation1"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0,2,0,4"
                                               Padding="0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Formation 1" />
                                        <TextBox x:Name="TextBoxIhsFormation1"
                                                  Grid.Row="0"
                                                  Grid.Column="1"
                                                  Margin="4,2,0,4"
                                                  VerticalAlignment="Center"
                                                  IsEnabled="False"
                                                  IsReadOnly="True"
                                                  Text="{Binding IncidIhsFormation1Text, Mode=OneWay}"
                                                  ToolTipService.ShowOnDisabled="True" />

                                        <Label x:Name="LabelIhsFormation2"
                                               Grid.Row="1"
                                               Grid.Column="0"
                                               Margin="0,2,0,4"
                                               Padding="0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Formation 2" />
                                        <TextBox x:Name="TextBoxIhsFormation2"
                                                  Grid.Row="1"
                                                  Grid.Column="1"
                                                  Margin="4,2,0,4"
                                                  VerticalAlignment="Center"
                                                  IsEnabled="False"
                                                  IsReadOnly="True"
                                                  Text="{Binding IncidIhsFormation2Text, Mode=OneWay}"
                                                  ToolTipService.ShowOnDisabled="True" />

                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxIhsManagement  -->
                                <GroupBox x:Name="GroupBoxIhsManagement"
                                          Grid.Row="3"
                                          Grid.Column="0"
										  IsEnabled="{Binding TabIhsControlsEnabled}"
                                          Header="{Binding IhsManagementHeader}">
                                    <Grid x:Name="GridIhsManagement" Margin="0,2,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition MinWidth="70" />
                                            <ColumnDefinition Width="378*" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelIhsManagement1"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0,2,0,4"
                                               Padding="0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Mgmt 1" />
                                        <TextBox x:Name="TextBoxIhsManagement1"
                                                  Grid.Row="0"
                                                  Grid.Column="1"
                                                  Margin="4,2,0,4"
                                                  VerticalAlignment="Center"
                                                  IsEnabled="False"
                                                  IsReadOnly="True"
                                                  Text="{Binding IncidIhsManagement1Text, Mode=OneWay}"
                                                  ToolTipService.ShowOnDisabled="True" />

                                        <Label x:Name="LabelIhsManagement2"
                                               Grid.Row="1"
                                               Grid.Column="0"
                                               Margin="0,2,0,4"
                                               Padding="0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Mgmt 2" />
                                        <TextBox x:Name="TextBoxIhsManagement2"
                                                  Grid.Row="1"
                                                  Grid.Column="1"
                                                  Margin="4,2,0,4"
                                                  VerticalAlignment="Center"
                                                  IsEnabled="False"
                                                  IsReadOnly="True"
                                                  Text="{Binding IncidIhsManagement2Text, Mode=OneWay}"
                                                  ToolTipService.ShowOnDisabled="True" />

                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxIhsComplex  -->
                                <GroupBox x:Name="GroupBoxIhsComplex"
                                          Grid.Row="4"
                                          Grid.Column="0"
										  IsEnabled="{Binding TabIhsControlsEnabled}"
                                          Header="{Binding IhsComplexHeader}">
                                    <Grid x:Name="GridIhsComplex" Margin="0,2,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition MinWidth="70" />
                                            <ColumnDefinition Width="378*" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelIhsComplex1"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0,2,0,4"
                                               Padding="0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Complex 1" />
                                        <TextBox x:Name="TextBoxIhsComplex1"
                                                  Grid.Row="0"
                                                  Grid.Column="1"
                                                  Margin="4,2,0,4"
                                                  VerticalAlignment="Center"
                                                  IsEnabled="False"
                                                  IsReadOnly="True"
                                                  Text="{Binding IncidIhsComplex1Text, Mode=OneWay}"
                                                  ToolTipService.ShowOnDisabled="True" />

                                        <Label x:Name="LabelIhsComplex2"
                                               Grid.Row="1"
                                               Grid.Column="0"
                                               Margin="0,2,0,4"
                                               Padding="0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Complex 2" />
                                        <TextBox x:Name="TextBoxIhsComplex2"
                                                  Grid.Row="1"
                                                  Grid.Column="1"
                                                  Margin="4,2,0,4"
                                                  VerticalAlignment="Center"
                                                  IsEnabled="False"
                                                  IsReadOnly="True"
                                                  Text="{Binding IncidIhsComplex2Text, Mode=OneWay}"
                                                  ToolTipService.ShowOnDisabled="True" />

                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxIhsSummary  -->
                                <GroupBox x:Name="GroupBoxIhsSummary"
                                          Grid.Row="5"
                                          Grid.Column="0"
										  IsEnabled="{Binding TabIhsControlsEnabled}"
                                          Header="{Binding IhsSummaryHeader}">
                                    <Grid x:Name="GridSummary" Margin="0,2,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition MinWidth="70" />
                                            <ColumnDefinition Width="378*" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelIhsSummary"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0,2,0,4"
                                               Padding="0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Summary" />
                                        <TextBox x:Name="TextBoxIhsSummary"
                                                 Grid.Row="0"
                                                 Grid.Column="1"
                                                 Margin="4,2,0,4"
                                                 VerticalAlignment="Center"
                                                 IsEnabled="False"
                                                 IsReadOnly="True"
                                                 Text="{Binding IncidIhsSummary, Mode=OneWay}" />
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </ScrollViewer>
                    </AdornerDecorator>

                </TabItem>

                <!--  TabItemPriority  -->
                <TabItem x:Name="TabItemPriority"
                		 IsEnabled="{Binding TabItemPriorityEnabled}" >

                    <TabItem.Header>
                        <StackPanel>
                            <Label x:Name="PriorityTabLabel"
                				   Margin="0,0,0,0"
                				   VerticalAlignment="Bottom"
                				   Content="{Binding PriorityTabLabel, ValidatesOnDataErrors=True}"
                				   FontSize="12"
                                   FontWeight="Medium"
                				   Padding="0,0,0,0"
                				   Tag="{Binding (Validation.Errors).CurrentItem.ErrorContent, Converter={StaticResource errorMessageConverter}, Mode=OneWay, RelativeSource={RelativeSource Self}}"
                				   ToolTipService.ShowOnDisabled="True" />
                        </StackPanel>
                    </TabItem.Header>
                    <AdornerDecorator>
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <Grid x:Name="GridTabItemPriority">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*" MinHeight="150" />
                                    <RowDefinition Height="*" MinHeight="150" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition />
                                    <ColumnDefinition Width="20" />
                                </Grid.ColumnDefinitions>

                                <GroupBox x:Name="GroupBoxPrimaryBapHabitats"
                                          Grid.Row="0"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="3"
                                          VerticalAlignment="Stretch"
										  IsEnabled="{Binding TabDetailsControlsEnabled}"
                                          Header="Priority Habitats">
                                    <Grid x:Name="GridBapHabitatsPrimary" Margin="0,4,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="22" />
                                        </Grid.ColumnDefinitions>
                                        <DataGrid x:Name="DataGridPrimaryBapHabitats"
                                                       Grid.Row="0"
                                                       Grid.Column="0"
                                                       Grid.ColumnSpan="2"
                                                       Margin="0,0,4,0"
                                                       AutoGenerateColumns="False"
                                                       BorderBrush="Black"
                                                       BorderThickness="1"
                                                       CanUserAddRows="False"
                                                       CanUserDeleteRows="False"
                                                       CanUserReorderColumns="False"
                                                       CanUserResizeColumns="True"
                                                       CanUserSortColumns="True"
                                                       HeadersVisibility="Column"
                                                       IsEnabled="{Binding BapHabitatsAutoEnabled}"
                                                       ItemsSource="{Binding IncidBapHabitatsAuto}"
                                                       MinRowHeight="24"
                                                       Padding="2,0"
                                                       RowDetailsVisibilityMode="Visible"
                                                       RowHeaderWidth="20"
                                                       RowHeight="24"
                                                       Style="{DynamicResource Esri_DataGridRowHeaderless}">

                                            <DataGrid.Resources>
                                                <Style TargetType="DataGridRow">
                                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                                </Style>
                                            </DataGrid.Resources>

                                            <DataGrid.RowValidationRules>
                                                <DataErrorValidationRule />
                                            </DataGrid.RowValidationRules>

                                            <DataGrid.Columns>
                                                <DataGridTextColumn Binding="{Binding bap_id}"
                                                                         Header="bap_id"
                                                                         IsReadOnly="True"
                                                                         Visibility="Collapsed" />
                                                <DataGridTextColumn Binding="{Binding incid}"
                                                                         Header="INCID"
                                                                         IsReadOnly="True"
                                                                         Visibility="Collapsed" />
                                                <DataGridComboBoxColumn x:Name="DataGridComboBoxPrimaryBapHabitatCodes" Width="SizeToHeader"
                                                                                       MinWidth="60"
                                                                                       CanUserResize="True"
                                                                                       DisplayMemberPath="description"
                                                                                       Header="Habitat"
                                                                                       IsReadOnly="True"
                                                                                       SelectedValueBinding="{Binding bap_habitat,
                                                                                                                      UpdateSourceTrigger=PropertyChanged}"
                                                                                       SelectedValuePath="code">
                                                    <DataGridComboBoxColumn.EditingElementStyle>
                                                        <Style TargetType="ComboBox">
                                                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                                                        </Style>
                                                    </DataGridComboBoxColumn.EditingElementStyle>
                                                    <DataGridComboBoxColumn.ElementStyle>
                                                        <Style TargetType="ComboBox">
                                                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                                                        </Style>
                                                    </DataGridComboBoxColumn.ElementStyle>
                                                </DataGridComboBoxColumn>
                                                <!-- EditingElementStyle="{DynamicResource ComboBoxStyle}" -->
                                                <DataGridComboBoxColumn x:Name="DataGridComboBoxPrimaryBapDeterminationQualityCodesUser" Width="SizeToHeader"
                                                                                       MinWidth="100"
                                                                                       CanUserResize="True"
                                                                                       DisplayMemberPath="description"
                                                                                       Header="Determ. Quality"
                                                                                       SelectedValueBinding="{Binding quality_determination,
                                                                                                                      UpdateSourceTrigger=PropertyChanged,
                                                                                                                      ValidatesOnDataErrors=True}"
                                                                                       SelectedValuePath="code">
                                                    <DataGridComboBoxColumn.EditingElementStyle>
                                                        <Style TargetType="ComboBox">
                                                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                                                        </Style>
                                                    </DataGridComboBoxColumn.EditingElementStyle>
                                                    <DataGridComboBoxColumn.ElementStyle>
                                                        <Style TargetType="ComboBox">
                                                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                                                        </Style>
                                                    </DataGridComboBoxColumn.ElementStyle>
                                                </DataGridComboBoxColumn>
                                                <!-- EditingElementStyle="{DynamicResource ComboBoxStyle}" -->
                                                <DataGridComboBoxColumn x:Name="DataGridComboBoxPrimaryyBapInterpretationQualityCodes" Width="SizeToHeader"
                                                                                       MinWidth="80"
                                                                                       CanUserResize="True"
                                                                                       DisplayMemberPath="description"
                                                                                       Header="Interp. Quality"
                                                                                       SelectedValueBinding="{Binding quality_interpretation,
                                                                                                                      UpdateSourceTrigger=PropertyChanged,
                                                                                                                      ValidatesOnDataErrors=True}"
                                                                                       SelectedValuePath="code">
                                                    <DataGridComboBoxColumn.EditingElementStyle>
                                                        <Style TargetType="ComboBox">
                                                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                                                        </Style>
                                                    </DataGridComboBoxColumn.EditingElementStyle>
                                                    <DataGridComboBoxColumn.ElementStyle>
                                                        <Style TargetType="ComboBox">
                                                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                                                        </Style>
                                                    </DataGridComboBoxColumn.ElementStyle>
                                                </DataGridComboBoxColumn>
                                                <!-- EditingElementStyle="{DynamicResource ComboBoxStyle}" -->
                                                <DataGridTextColumn Width="SizeToHeader"
                                                                         MinWidth="100"
                                                                         Binding="{Binding interpretation_comments,
                                                                                           UpdateSourceTrigger=PropertyChanged,
                                                                                           ValidatesOnDataErrors=True}"
                                                                         CanUserResize="True"
                                                                         Header="Interp. Comments">
                                                    <DataGridTextColumn.ElementStyle>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="VerticalAlignment" Value="Center"/>
                                                        </Style>
                                                    </DataGridTextColumn.ElementStyle>

                                                    <DataGridTextColumn.EditingElementStyle>
                                                        <Style TargetType="TextBox">
                                                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                                                        </Style>
                                                    </DataGridTextColumn.EditingElementStyle>
                                                </DataGridTextColumn>

                                                    <!-- EditingElementStyle="{DynamicResource TextBoxStyle}" -->
                                            </DataGrid.Columns>
                                        </DataGrid>

                                        <!--  ButtonEditPriorityHabitats  -->
                                        <Button x:Name="ButtonEditPriorityHabitats"
												Grid.Row="0"
												Grid.Column="2"
                                                MinWidth="0"
                                                Width="20"
                                                MinHeight="0"
                                                Height="20"
												Margin="0,2,0,0"
                                                Padding="0,0,0,0"
												HorizontalAlignment="Right"
												VerticalAlignment="Top"
												Command="{Binding EditPriorityHabitatsCommand}"
												IsEnabled="{Binding CanEditPriorityHabitats}"
												ToolTip="Priority Habitats"
												ToolTipService.ShowOnDisabled="True"
                                                Style="{DynamicResource Esri_Button}">
                                            <Image Source="{Binding Path=ButtonEditPriorityHabitatsImg}" Width="16" Height="16" />
                                        </Button>

                                    </Grid>
                                </GroupBox>

                                <GroupBox x:Name="GroupBoxSecondaryBapHabitats"
                                          Grid.Row="1"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="3"
                                          VerticalAlignment="Stretch"
										  IsEnabled="{Binding TabDetailsControlsEnabled}"
                                          Header="Potential Priority Habitats">
                                    <Grid x:Name="GridBapHabitatsUser" Margin="0,4,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="22" />
                                        </Grid.ColumnDefinitions>
                                        <DataGrid x:Name="DataGridUserBapHabitats"
                                                       Grid.Row="0"
                                                       Grid.Column="0"
                                                       Grid.ColumnSpan="2"
                                                       Margin="0,0,4,0"
                                                       AutoGenerateColumns="False"
                                                       BorderBrush="Black"
                                                       BorderThickness="1"
                                                       CanUserAddRows="True"
                                                       CanUserDeleteRows="True"
                                                       CanUserReorderColumns="False"
                                                       CanUserResizeColumns="True"
                                                       CanUserSortColumns="True"
                                                       HeadersVisibility="All"
                                                       IsEnabled="{Binding BapHabitatsUserEnabled}"
                                                       ItemsSource="{Binding IncidBapHabitatsUser}"
                                                       MinRowHeight="24"
                                                       Padding="2,0"
                                                       RowDetailsVisibilityMode="Visible"
                                                       RowHeaderWidth="20"
                                                       RowHeight="24"
                                                       VirtualizingStackPanel.IsVirtualizing="False"
                                                       Style="{DynamicResource Esri_DataGrid}">

                                            <DataGrid.RowStyle>
                                                <Style TargetType="DataGridRow" BasedOn="{StaticResource Esri_DataGridRow}" />
                                            </DataGrid.RowStyle>

                                            <DataGrid.RowValidationRules>
                                                <DataErrorValidationRule />
                                            </DataGrid.RowValidationRules>

                                            <DataGrid.Columns>
                                                <DataGridTextColumn Binding="{Binding bap_id}"
                                                                         Header="bap_id"
                                                                         IsReadOnly="True"
                                                                         Visibility="Collapsed" />
                                                <DataGridTextColumn Binding="{Binding incid}"
                                                                         Header="INCID"
                                                                         IsReadOnly="True"
                                                                         Visibility="Collapsed" />
                                                <DataGridComboBoxColumn x:Name="DataGridComboBoxSecondaryBapHabitatCodes" Width="SizeToHeader"
                                                                                       MinWidth="60"
                                                                                       CanUserResize="True"
                                                                                       DisplayMemberPath="description"
                                                                                       Header="Habitat"
                                                                                       IsReadOnly="False"
                                                                                       SelectedValueBinding="{Binding bap_habitat,
                                                                                                                      UpdateSourceTrigger=PropertyChanged,
                                                                                                                      ValidatesOnDataErrors=True}"
                                                                                       SelectedValuePath="code">
                                                    <DataGridComboBoxColumn.EditingElementStyle>
                                                        <Style TargetType="ComboBox">
                                                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                                                        </Style>
                                                    </DataGridComboBoxColumn.EditingElementStyle>
                                                    <DataGridComboBoxColumn.ElementStyle>
                                                        <Style TargetType="ComboBox">
                                                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                                                        </Style>
                                                    </DataGridComboBoxColumn.ElementStyle>
                                                </DataGridComboBoxColumn>
                                                <!-- EditingElementStyle="{DynamicResource ComboBoxStyle}" -->
                                                <DataGridComboBoxColumn x:Name="DataGridComboBoxSecondaryBapDeterminationQualityCodesUser" Width="SizeToHeader"
                                                                                       MinWidth="100"
                                                                                       CanUserResize="True"
                                                                                       DisplayMemberPath="description"
                                                                                       Header="Determ. Quality"
                                                                                       SelectedValueBinding="{Binding quality_determination,
                                                                                                                      UpdateSourceTrigger=PropertyChanged,
                                                                                                                      ValidatesOnDataErrors=True}"
                                                                                       SelectedValuePath="code">
                                                    <DataGridComboBoxColumn.EditingElementStyle>
                                                        <Style TargetType="ComboBox">
                                                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                                                        </Style>
                                                    </DataGridComboBoxColumn.EditingElementStyle>
                                                    <DataGridComboBoxColumn.ElementStyle>
                                                        <Style TargetType="ComboBox">
                                                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                                                        </Style>
                                                    </DataGridComboBoxColumn.ElementStyle>
                                                </DataGridComboBoxColumn>
                                                <!-- EditingElementStyle="{DynamicResource ComboBoxStyle}" -->
                                                <DataGridComboBoxColumn x:Name="DataGridComboBoxSecondaryBapInterpretationQualityCodes" Width="SizeToHeader"
                                                                                       MinWidth="80"
                                                                                       CanUserResize="True"
                                                                                       DisplayMemberPath="description"
                                                                                       Header="Interp. Quality"
                                                                                       SelectedValueBinding="{Binding quality_interpretation,
                                                                                                                      UpdateSourceTrigger=PropertyChanged,
                                                                                                                      ValidatesOnDataErrors=True}"
                                                                                       SelectedValuePath="code">
                                                    <DataGridComboBoxColumn.EditingElementStyle>
                                                        <Style TargetType="ComboBox">
                                                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                                                        </Style>
                                                    </DataGridComboBoxColumn.EditingElementStyle>
                                                    <DataGridComboBoxColumn.ElementStyle>
                                                        <Style TargetType="ComboBox">
                                                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                                                        </Style>
                                                    </DataGridComboBoxColumn.ElementStyle>
                                                </DataGridComboBoxColumn>
                                                <!-- EditingElementStyle="{DynamicResource ComboBoxStyle}" -->
                                                <DataGridTextColumn Width="*"
                                                                         MinWidth="100"
                                                                         Binding="{Binding interpretation_comments,
                                                                                           UpdateSourceTrigger=PropertyChanged,
                                                                                           ValidatesOnDataErrors=True}"
                                                                         CanUserResize="True"
                                                                         Header="Interp. Comments">
                                                    <DataGridTextColumn.ElementStyle>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="VerticalAlignment" Value="Center"/>
                                                        </Style>
                                                    </DataGridTextColumn.ElementStyle>

                                                    <DataGridTextColumn.EditingElementStyle>
                                                        <Style TargetType="TextBox">
                                                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                                                        </Style>
                                                    </DataGridTextColumn.EditingElementStyle>
                                                </DataGridTextColumn>
                                                <!-- EditingElementStyle="{DynamicResource TextBoxStyle}" -->
                                            </DataGrid.Columns>
                                        </DataGrid>

                                        <!--  ButtonEditPriorityHabitats  -->
                                        <Button x:Name="ButtonEditPotentialHabitats"
												Grid.Row="0"
												Grid.Column="2"
                                                MinWidth="0"
                                                Width="20"
                                                MinHeight="0"
                                                Height="20"
												Margin="0,2,0,0"
                                                Padding="0,0,0,0"
												HorizontalAlignment="Right"
												VerticalAlignment="Top"
												Command="{Binding EditPotentialHabitatsCommand}"
												IsEnabled="{Binding CanEditPotentialHabitats}"
												ToolTip="Potential Priority Habitats"
												ToolTipService.ShowOnDisabled="True"
                                                Style="{DynamicResource Esri_Button}">
                                            <Image Source="{Binding Path=ButtonEditPotentialHabitatsImg}" Width="16" Height="16" />
                                        </Button>

                                        <CheckBox x:Name="CheckBoxCopyBapHabitatUser"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  Margin="0,0,0,4"
                                                  HorizontalAlignment="Center"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidBapHabitatsUser,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}"
                                                  IsEnabled="{Binding BapHabitatsUserEnabled}" />
                                    </Grid>
                                </GroupBox>

                            </Grid>
                        </ScrollViewer>
                    </AdornerDecorator>
                </TabItem>

                <!--  TabItemDetails  -->
                <TabItem x:Name="TabItemDetails"
				         IsEnabled="{Binding TabItemDetailsEnabled}">

                    <TabItem.Header>
                        <StackPanel>
                            <Label x:Name="DetailsTabLabel"
                        		   Margin="0,0,0,0"
                        		   VerticalAlignment="Bottom"
                        		   Content="{Binding DetailsTabLabel, ValidatesOnDataErrors=True}"
                        		   FontSize="12"
                                   FontWeight="Medium"
                        		   Padding="0,0,0,0"
                        		   Tag="{Binding (Validation.Errors).CurrentItem.ErrorContent, Converter={StaticResource errorMessageConverter}, Mode=OneWay, RelativeSource={RelativeSource Self}}"
                        		   ToolTipService.ShowOnDisabled="True" />
                        </StackPanel>
                    </TabItem.Header>
                    <AdornerDecorator>
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <Grid x:Name="GridTabItemDetails">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="2*" />
                                    <RowDefinition Height="1*" />
                                    <RowDefinition Height="1.5*" />
                                    <RowDefinition Height="1.5*" />
                                    <RowDefinition Height="3*" />
                                </Grid.RowDefinitions>

                                <!--  GroupBoxGeneralComments  -->
                                <GroupBox x:Name="GroupBoxGeneralComments"
                                          Grid.Row="0"
                                          VerticalAlignment="Stretch"
										  IsEnabled="{Binding TabDetailsControlsEnabled}"
                                          Header="{Binding DetailsCommentsHeader}">
                                    <Grid x:Name="GridGeneralComments" Margin="0,4,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" MinWidth="70" />
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelGeneralComments"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
											   Content="General&#xa;Comments">
                                        </Label>
                                        <TextBox x:Name="TextBoxIncidGeneralComments"
                                                 Grid.Row="0"
                                                 Grid.Column="1"
                                                 MinHeight="52"
                                                 BorderThickness="1"
                                                 MaxLength="254"
                                                 Text="{Binding IncidGeneralComments,
                                                                Mode=TwoWay,
                                                                UpdateSourceTrigger=PropertyChanged,
                                                                ValidatesOnDataErrors=True}"
                                                 TextWrapping="Wrap"
                                                 Tag="ErrorContent"
                                                 ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyGeneralComments"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidGeneralComments,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxMaps  -->
                                <GroupBox x:Name="GroupBoxMaps"
                                          Grid.Row="1"
										  IsEnabled="{Binding TabDetailsControlsEnabled}"
                                          Header="{Binding DetailsMapsHeader}">
                                    <Grid x:Name="GridMaps" Margin="0,4,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" MinWidth="70" />
                                            <ColumnDefinition Width="*" MinWidth="100" />
                                            <ColumnDefinition Width="20" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" MinWidth="100" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelBoundaryBaseMap"
                                                   Grid.Row="0"
                                                   Grid.Column="0"
                                                   HorizontalAlignment="Right"
                                                   VerticalAlignment="Center"
                                                   Content="Boundary" />
                                        <ComboBox x:Name="ComboBoxIncidBoundaryBaseMap"
                                                      Grid.Row="0"
                                                      Grid.Column="1"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="False"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding BoundaryMapCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedValue="{Binding IncidBoundaryBaseMap,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="ErrorContent"
                                                      ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyBoundaryBaseMap"
                                                      Grid.Row="0"
                                                      Grid.Column="2"
                                                      HorizontalAlignment="Right"
                                                      VerticalAlignment="Center"
                                                      IsChecked="{Binding CopySwitches.CopyIncidBoundaryBaseMap,
                                                                          Mode=TwoWay,
                                                                          UpdateSourceTrigger=PropertyChanged}" />
                                        <Label x:Name="LabelDigitisationBaseMap"
                                                   Grid.Row="0"
                                                   Grid.Column="3"
                                                   Margin="6,0,0,0"
                                                   HorizontalAlignment="Right"
                                                   VerticalAlignment="Center"
                                                   Content="Digitisation" />
                                        <ComboBox x:Name="ComboBoxIncidDigitisationBaseMap"
                                                      Grid.Row="0"
                                                      Grid.Column="4"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="False"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding BoundaryMapCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedValue="{Binding IncidDigitisationBaseMap,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="ErrorContent"
                                                      ToolTipService.ShowOnDisabled="True" />

                                        <CheckBox x:Name="CheckBoxCopyDigitisationBaseMap"
                                                  Grid.Row="0"
                                                  Grid.Column="5"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidDigitisationBaseMap,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxSite  -->
                                <GroupBox x:Name="GroupBoxSite"
                                          Grid.Row="2"
										  IsEnabled="{Binding TabDetailsControlsEnabled}"
                                          Header="{Binding DetailsSiteHeader}">
                                    <Grid x:Name="GridSite" Margin="0,4,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" MinWidth="70" />
                                            <ColumnDefinition Width="Auto" MinWidth="100" />
                                            <ColumnDefinition Width="20" />
                                            <ColumnDefinition Width="*" MinWidth="100" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelSiteRef"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Site Ref" />
                                        <TextBox x:Name="TextBoxSiteRef"
                                                 Grid.Row="0"
                                                 Grid.Column="1"
                                                 Width="180"
                                                 HorizontalAlignment="Left"
                                                 VerticalAlignment="Center"
                                                 BorderThickness="1"
                                                 MaxLength="16"
                                                 Text="{Binding IncidSiteRef,
                                                                Mode=TwoWay,
                                                                UpdateSourceTrigger=PropertyChanged,
                                                                ValidatesOnDataErrors=True}"
                                                 Tag="ErrorContent"
                                                 ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIncidSiteRef"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSiteRef,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelSiteName"
                                               Grid.Row="1"
                                               Grid.Column="0"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Site Name" />
                                        <TextBox x:Name="TextBoxSiteName"
                                                 Grid.Row="1"
                                                 Grid.Column="1"
												 Grid.ColumnSpan="3"
                                                 BorderThickness="1"
                                                 MaxLength="100"
                                                 VerticalAlignment="Center"
                                                 Text="{Binding IncidSiteName,
                                                                Mode=TwoWay,
                                                                UpdateSourceTrigger=PropertyChanged,
                                                                ValidatesOnDataErrors=True}"
                                                 TextWrapping="Wrap"
                                                 Tag="ErrorContent"
                                                 ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIncidSiteName"
                                                  Grid.Row="1"
                                                  Grid.Column="4"
                                                  Margin="0,2,0,2"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSiteName,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxCondition  -->
                                <GroupBox x:Name="GroupBoxCondition"
                                          Grid.Row="3"
										  IsEnabled="{Binding TabDetailsControlsEnabled}"
                                          Header="{Binding DetailsConditionHeader}">
                                    <Grid x:Name="GridCondition" Margin="0,4,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" MinWidth="70" />
                                            <ColumnDefinition Width="*" MinWidth="100" />
                                            <ColumnDefinition Width="20" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="2*" MinWidth="100" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelCondition"
												   Grid.Row="0"
												   Grid.Column="0"
												   HorizontalAlignment="Right"
												   VerticalAlignment="Center"
												   Content="Condition" />
                                        <ComboBox x:Name="ComboBoxIncidCondition"
                                                      Grid.Row="0"
                                                      Grid.Column="1"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="False"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding ConditionCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedValue="{Binding IncidCondition,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="ErrorContent"
                                                      ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyCondition"
													  Grid.Row="0"
													  Grid.Column="2"
													  HorizontalAlignment="Right"
													  VerticalAlignment="Center"
													  IsChecked="{Binding CopySwitches.CopyIncidCondition,
																		  Mode=TwoWay,
																		  UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelConditionQualifier"
												   Grid.Row="0"
												   Grid.Column="3"
												   Margin="6,0,0,0"
												   HorizontalAlignment="Right"
												   VerticalAlignment="Center"
												   Content="Qualifier" />
                                        <ComboBox x:Name="ComboBoxIncidConditionQualifier"
                                                      Grid.Row="0"
                                                      Grid.Column="4"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
													  IsEnabled="{Binding IncidConditionEnabled,
                                                                     Mode=OneWay}"
                                                      IsEditable="False"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding ConditionQualifierCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedValue="{Binding IncidConditionQualifier,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="ErrorContent"
                                                      ToolTipService.ShowOnDisabled="True" />

                                        <CheckBox x:Name="CheckBoxCopyConditionQualifier"
													Grid.Row="0"
													Grid.Column="5"
													HorizontalAlignment="Right"
													VerticalAlignment="Center"
													IsChecked="{Binding CopySwitches.CopyIncidConditionQualifier,
																		Mode=TwoWay,
																		UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelConditionDate"
												   Grid.Row="1"
												   Grid.Column="0"
												   HorizontalAlignment="Right"
												   VerticalAlignment="Center"
												   Content="Date" />
                                        <TextBox x:Name="TextBoxConditionDate"
													 Grid.Row="1"
													 Grid.Column="1"
                                                     Grid.ColumnSpan="4"
                                                     Height="22"
													 VerticalAlignment="Center"
													 BorderThickness="1"
												     IsEnabled="{Binding IncidConditionEnabled,
														                 Mode=OneWay}"
													 Text="{Binding IncidConditionDate,
																	ConverterParameter=source_date_start^source_date_end^source_date_type,
																	Converter={StaticResource vagueDateConverter},
																	Mode=TwoWay,
																	UpdateSourceTrigger=LostFocus,
																	ValidatesOnDataErrors=True}"
													 Tag="ErrorContent"
													 ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyConditionDate"
													  Grid.Row="1"
													  Grid.Column="5"
													  HorizontalAlignment="Right"
													  VerticalAlignment="Center"
													  IsChecked="{Binding CopySwitches.CopyIncidConditionDate,
																		  Mode=TwoWay,
																		  UpdateSourceTrigger=PropertyChanged}" />

                                    </Grid>
                                </GroupBox>

                                <!--  GroupBoxQuality  -->
                                <GroupBox x:Name="GroupBoxQuality"
                                          Grid.Row="4"
										  IsEnabled="{Binding TabDetailsControlsEnabled}"
                                          Header="{Binding DetailsQualityHeader}">
                                    <Grid x:Name="GridQuality" Margin="0,4,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" MinWidth="70" />
                                            <ColumnDefinition Width="*" MinWidth="100" />
                                            <ColumnDefinition Width="2.5*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <Label x:Name="LabelQualityDetermination"
												   Grid.Row="0"
												   Grid.Column="0"
												   HorizontalAlignment="Right"
												   VerticalAlignment="Center"
												   Content="Determin." />
                                        <ComboBox x:Name="ComboBoxIncidQualityDetermination"
                                                      Grid.Row="0"
                                                      Grid.Column="1"
													  Grid.ColumnSpan="2"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="False"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding QualityDeterminationCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedValue="{Binding IncidQualityDetermination,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="ErrorContent"
                                                      ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyQualityDetermination"
													  Grid.Row="0"
													  Grid.Column="3"
													  HorizontalAlignment="Right"
													  VerticalAlignment="Center"
													  IsChecked="{Binding CopySwitches.CopyIncidQualityDetermination,
																		  Mode=TwoWay,
																		  UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelQualityInterpretation"
												   Grid.Row="1"
												   Grid.Column="0"
												   HorizontalAlignment="Right"
												   VerticalAlignment="Center"
												   Content="Interpret." />
                                        <ComboBox x:Name="ComboBoxIncidQualityInterpretation"
                                                      Grid.Row="1"
                                                      Grid.Column="1"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="False"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding QualityInterpretationCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedValue="{Binding IncidQualityInterpretation,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="ErrorContent"
                                                      ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyQualityInterpretation"
													Grid.Row="1"
													Grid.Column="3"
													HorizontalAlignment="Right"
													VerticalAlignment="Center"
													IsChecked="{Binding CopySwitches.CopyIncidQualityInterpretation,
																		Mode=TwoWay,
																		UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelQualityComments"
												   Grid.Row="2"
												   Grid.Column="0"
												   HorizontalAlignment="Right"
												   VerticalAlignment="Center"
												   Content="Interpret.&#xa;Comments" />
                                        <TextBox x:Name="TextBoxQualityComments"
													 Grid.Row="2"
													 Grid.Column="1"
                                                     Grid.ColumnSpan="2"
													 MinHeight="52"
													 BorderThickness="1"
													 MaxLength="254"
													 Text="{Binding IncidQualityComments,
																	Mode=TwoWay,
																	UpdateSourceTrigger=PropertyChanged,
																	ValidatesOnDataErrors=True}"
													 TextWrapping="Wrap"
													 Tag="ErrorContent"
													 ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyQualityComments"
													  Grid.Row="2"
													  Grid.Column="3"
													  HorizontalAlignment="Right"
													  VerticalAlignment="Center"
													  IsChecked="{Binding CopySwitches.CopyIncidQualityComments,
																		  Mode=TwoWay,
																		  UpdateSourceTrigger=PropertyChanged}" />

                                    </Grid>
                                </GroupBox>

                            </Grid>
                        </ScrollViewer>
                    </AdornerDecorator>
                </TabItem>

                <!--  TabItemSources  -->
                <TabItem x:Name="TabItemSources" IsEnabled="{Binding TabItemSourcesEnabled}">
                    <TabItem.Header>
                        <StackPanel>
                            <Label x:Name="SourcesTabLabel"
                                   Margin="0,0,0,0"
                                   VerticalAlignment="Bottom"
                                   Content="{Binding SourcesTabLabel, ValidatesOnDataErrors=True}"
                                   FontSize="12"
                                   FontWeight="Medium"
                                   Padding="0,0,0,0"
                				   Tag="{Binding (Validation.Errors).CurrentItem.ErrorContent, Converter={StaticResource errorMessageConverter}, Mode=OneWay, RelativeSource={RelativeSource Self}}"
                				   ToolTipService.ShowOnDisabled="True" />
                        </StackPanel>
                    </TabItem.Header>
                    <AdornerDecorator>
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <Grid x:Name="GridTabItemSources">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*" MinHeight="150" />
                                    <RowDefinition Height="*" MinHeight="150" />
                                    <RowDefinition Height="*" MinHeight="150" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="80*" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="20" />
                                </Grid.ColumnDefinitions>

                                <GroupBox x:Name="GroupBoxSource1"
                                          Grid.Row="0"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="3"
										  IsEnabled="{Binding TabSourcesControlsEnabled}"
                                          Header="{Binding Source1Header}">
                                    <Grid x:Name="GridSource1" Margin="0,0,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="50" />
                                            <ColumnDefinition Width="40" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <TextBox x:Name="LabelIncidSource1Number"
                                               Grid.Row="0"
                                               Grid.Column="0"
											   FontWeight="Bold"
                                               HorizontalAlignment="Left"
                                               VerticalAlignment="Center"
                                               Text="#1"
											   IsEnabled="False"
					                           IsReadOnly="True"
						       				   Visibility="{Binding ShowSourceNumbers}" />
                                        <Label x:Name="LabelIncidSource1Name"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Grid.ColumnSpan="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Name" />
                                        <ComboBox x:Name="ComboBoxIncidSource1Name"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="source_name"
                                                  IsEditable="True"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Source1Names,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding IncidSource1Id,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="source_id"
                                                  Tag="ErrorContent"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIncidSource1Name"
                                                  Grid.Row="0"
                                                  Grid.Column="3"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource1Id,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource1Date"
                                               Grid.Row="1"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Vague Date" />
                                        <TextBox x:Name="TextBoxIncidSource1Date"
                                                 Grid.Row="1"
                                                 Grid.Column="2"
                                                 VerticalAlignment="Center"
                                                 BorderThickness="1"
                                                 IsEnabled="{Binding IncidSource1Enabled,
                                                                     Mode=OneWay}"
                                                 Text="{Binding IncidSource1Date,
                                                                ConverterParameter=source_date_start^source_date_end^source_date_type,
                                                                Converter={StaticResource vagueDateConverter},
                                                                Mode=TwoWay,
                                                                UpdateSourceTrigger=LostFocus,
                                                                ValidatesOnDataErrors=True}"
                                                 Tag="ErrorContent"
                                                 ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopySource1Date"
                                                  Grid.Row="1"
                                                  Grid.Column="3"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource1Date,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource1HabitatClass"
                                               Grid.Row="2"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Habitat Class" />
                                        <ComboBox x:Name="ComboBoxIncidSource1HabitatClass"
                                                  Grid.Row="2"
                                                  Grid.Column="2"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IncidSource1Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding SourceHabitatClassCodes,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding IncidSource1HabitatClass,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="ErrorContent"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopySource1HabitatClass"
                                                  Grid.Row="2"
                                                  Grid.Column="3"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource1HabitatClass,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource1HabitatType"
                                               Grid.Row="3"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Habitat Type" />

                                        <ComboBox x:Name="ComboBoxIncidSource1HabitatType"
                                                  Grid.Row="3"
                                                  Grid.Column="2"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IncidSource1Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Source1HabitatTypeCodes,
                                                                        ConverterParameter=code^name^description^sort_order,
                                                                        Converter={StaticResource codeNameDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding IncidSource1HabitatType,
                                                                          ConverterParameter=code^name^description^sort_order,
                                                                          Converter={StaticResource codeNameDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="ErrorContent"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIncidSource1HabitatType"
                                                  Grid.Row="3"
                                                  Grid.Column="3"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource1HabitatType,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource1BoundaryImportance"
                                               Grid.Row="4"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Boundary Imp." />
                                        <Grid x:Name="GridSource1Importance"
                                              Grid.Row="4"
                                              Grid.Column="2">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition Width="20" />
                                                <ColumnDefinition Width="10" />
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>

                                            <ComboBox x:Name="ComboBoxIncidSource1BoundaryImportance"
                                                      Grid.Row="0"
                                                      Grid.Column="0"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="True"
                                                      IsEnabled="{Binding IncidSource1Enabled,
                                                                          Mode=OneWay}"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding SourceImportanceCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedValue="{Binding IncidSource1BoundaryImportance,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="ErrorContent"
                                                      ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox x:Name="CheckBoxCopySource1BoundaryImportance"
                                                      Grid.Row="0"
                                                      Grid.Column="1"
                                                      HorizontalAlignment="Right"
                                                      VerticalAlignment="Center"
                                                      IsChecked="{Binding CopySwitches.CopyIncidSource1BoundaryImportance,
                                                                          Mode=TwoWay,
                                                                          UpdateSourceTrigger=PropertyChanged}" />
                                            <Label x:Name="LabelIncidSource1HabitatImportance"
                                                   Grid.Row="0"
                                                   Grid.Column="3"
                                                   HorizontalAlignment="Right"
                                                   VerticalAlignment="Center"
                                                   Content="Habitat Imp." />
                                            <ComboBox x:Name="ComboBoxIncidSource1HabitatImportance"
                                                      Grid.Row="3"
                                                      Grid.Column="4"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="True"
                                                      IsEnabled="{Binding IncidSource1Enabled,
                                                                          Mode=OneWay}"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding SourceImportanceCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedValue="{Binding IncidSource1HabitatImportance,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="ErrorContent"
                                                      ToolTipService.ShowOnDisabled="True" />
                                        </Grid>
                                        <CheckBox x:Name="CheckBoxCopySource1HabitatImportance"
                                                  Grid.Row="4"
                                                  Grid.Column="3"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource1HabitatImportance,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                    </Grid>
                                </GroupBox>

                                <GroupBox x:Name="GroupBoxSource2"
                                          Grid.Row="1"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="3"
										  IsEnabled="{Binding TabSourcesControlsEnabled}"
                                          Header="{Binding Source2Header}">
                                    <Grid x:Name="GridSource2" Margin="0,0,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="50" />
                                            <ColumnDefinition Width="40" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <TextBox x:Name="LabelIncidSource2Number"
                                               Grid.Row="0"
                                               Grid.Column="0"
											   FontWeight="Bold"
                                               HorizontalAlignment="Left"
                                               VerticalAlignment="Center"
                                               Text="#2"
											   IsEnabled="False"
					                           IsReadOnly="True"
						       				   Visibility="{Binding ShowSourceNumbers}" />
                                        <Label x:Name="LabelIncidSource2Name"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Grid.ColumnSpan="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Name" />
                                        <ComboBox x:Name="ComboBoxIncidSource2Name"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="source_name"
                                                  IsEditable="True"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Source2Names,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding IncidSource2Id,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="source_id"
                                                  Tag="ErrorContent"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIncidSource2Name"
                                                  Grid.Row="0"
                                                  Grid.Column="3"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource2Id,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource2Date"
                                               Grid.Row="1"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Vague Date" />
                                        <TextBox x:Name="TextBoxIncidSource2Date"
                                                 Grid.Row="1"
                                                 Grid.Column="2"
                                                 VerticalAlignment="Center"
                                                 BorderThickness="1"
                                                 IsEnabled="{Binding IncidSource2Enabled,
                                                                     Mode=OneWay}"
                                                 Text="{Binding IncidSource2Date,
                                                                ConverterParameter=source_date_start^source_date_end^source_date_type,
                                                                Converter={StaticResource vagueDateConverter},
                                                                Mode=TwoWay,
                                                                UpdateSourceTrigger=LostFocus,
                                                                ValidatesOnDataErrors=True}"
                                                 Tag="ErrorContent"
                                                 ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopySource2Date"
                                                  Grid.Row="1"
                                                  Grid.Column="3"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource2Date,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource2HabitatClass"
                                               Grid.Row="2"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Habitat Class" />
                                        <ComboBox x:Name="ComboBoxIncidSource2HabitatClass"
                                                  Grid.Row="2"
                                                  Grid.Column="2"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IncidSource2Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding SourceHabitatClassCodes,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding IncidSource2HabitatClass,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="ErrorContent"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopySource2HabitatClass"
                                                  Grid.Row="2"
                                                  Grid.Column="3"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource2HabitatClass,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource2HabitatType"
                                               Grid.Row="3"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Habitat Type" />

                                        <ComboBox x:Name="ComboBoxIncidSource2HabitatType"
                                                  Grid.Row="3"
                                                  Grid.Column="2"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IncidSource2Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Source2HabitatTypeCodes,
                                                                        ConverterParameter=code^name^description^sort_order,
                                                                        Converter={StaticResource codeNameDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding IncidSource2HabitatType,
                                                                          ConverterParameter=code^name^description^sort_order,
                                                                          Converter={StaticResource codeNameDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="ErrorContent"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIncidSource2HabitatType"
                                                  Grid.Row="3"
                                                  Grid.Column="3"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource2HabitatType,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource2BoundaryImportance"
                                               Grid.Row="4"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Boundary Imp." />
                                        <Grid x:Name="GridSource2Importance"
                                              Grid.Row="4"
                                              Grid.Column="2">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition Width="20" />
                                                <ColumnDefinition Width="10" />
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>

                                            <ComboBox x:Name="ComboBoxIncidSource2BoundaryImportance"
                                                      Grid.Row="0"
                                                      Grid.Column="0"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="True"
                                                      IsEnabled="{Binding IncidSource2Enabled,
                                                                          Mode=OneWay}"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding SourceImportanceCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedValue="{Binding IncidSource2BoundaryImportance,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="ErrorContent"
                                                      ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox x:Name="CheckBoxCopySource2BoundaryImportance"
                                                      Grid.Row="0"
                                                      Grid.Column="1"
                                                      HorizontalAlignment="Right"
                                                      VerticalAlignment="Center"
                                                      IsChecked="{Binding CopySwitches.CopyIncidSource2BoundaryImportance,
                                                                          Mode=TwoWay,
                                                                          UpdateSourceTrigger=PropertyChanged}" />
                                            <Label x:Name="LabelIncidSource2HabitatImportance"
                                                   Grid.Row="0"
                                                   Grid.Column="3"
                                                   HorizontalAlignment="Right"
                                                   VerticalAlignment="Center"
                                                   Content="Habitat Imp." />
                                            <ComboBox x:Name="ComboBoxIncidSource2HabitatImportance"
                                                      Grid.Row="3"
                                                      Grid.Column="4"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="True"
                                                      IsEnabled="{Binding IncidSource2Enabled,
                                                                          Mode=OneWay}"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding SourceImportanceCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedValue="{Binding IncidSource2HabitatImportance,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="ErrorContent"
                                                      ToolTipService.ShowOnDisabled="True" />
                                        </Grid>
                                        <CheckBox x:Name="CheckBoxCopySource2HabitatImportance"
                                                  Grid.Row="4"
                                                  Grid.Column="3"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource2HabitatImportance,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                    </Grid>
                                </GroupBox>

                                <GroupBox x:Name="GroupBoxSource3"
                                          Grid.Row="2"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="3"
										  IsEnabled="{Binding TabSourcesControlsEnabled}"
                                          Header="{Binding Source3Header}">
                                    <Grid x:Name="GridSource3" Margin="0,0,0,0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="50" />
                                            <ColumnDefinition Width="40" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>

                                        <TextBox x:Name="LabelIncidSource3Number"
                                               Grid.Row="0"
                                               Grid.Column="0"
											   FontWeight="Bold"
                                               HorizontalAlignment="Left"
                                               VerticalAlignment="Center"
                                               Text="#3"
											   IsEnabled="False"
					                           IsReadOnly="True"
						       				   Visibility="{Binding ShowSourceNumbers}" />
                                        <Label x:Name="LabelIncidSource3Name"
                                               Grid.Row="0"
                                               Grid.Column="0"
                                               Grid.ColumnSpan="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Name" />
                                        <ComboBox x:Name="ComboBoxIncidSource3Name"
                                                  Grid.Row="0"
                                                  Grid.Column="2"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="source_name"
                                                  IsEditable="True"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Source3Names,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding IncidSource3Id,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="source_id"
                                                  Tag="ErrorContent"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIncidSource3Name"
                                                  Grid.Row="0"
                                                  Grid.Column="3"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource3Id,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource3Date"
                                               Grid.Row="1"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Vague Date" />
                                        <TextBox x:Name="TextBoxIncidSource3Date"
                                                 Grid.Row="1"
                                                 Grid.Column="2"
                                                 VerticalAlignment="Center"
                                                 BorderThickness="1"
                                                 IsEnabled="{Binding IncidSource3Enabled,
                                                                     Mode=OneWay}"
                                                 Text="{Binding IncidSource3Date,
                                                                ConverterParameter=source_date_start^source_date_end^source_date_type,
                                                                Converter={StaticResource vagueDateConverter},
                                                                Mode=TwoWay,
                                                                UpdateSourceTrigger=LostFocus,
                                                                ValidatesOnDataErrors=True}"
                                                 Tag="ErrorContent"
                                                 ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopySource3Date"
                                                  Grid.Row="1"
                                                  Grid.Column="3"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource3Date,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource3HabitatClass"
                                               Grid.Row="2"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Habitat Class" />
                                        <ComboBox x:Name="ComboBoxIncidSource3HabitatClass"
                                                  Grid.Row="2"
                                                  Grid.Column="2"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IncidSource3Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding SourceHabitatClassCodes,
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding IncidSource3HabitatClass,
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="ErrorContent"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopySource3HabitatClass"
                                                  Grid.Row="2"
                                                  Grid.Column="3"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource3HabitatClass,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource3HabitatType"
                                               Grid.Row="3"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Habitat Type" />

                                        <ComboBox x:Name="ComboBoxIncidSource3HabitatType"
                                                  Grid.Row="3"
                                                  Grid.Column="2"
                                                  VerticalAlignment="Center"
                                                  DisplayMemberPath="description"
                                                  IsEditable="True"
                                                  IsEnabled="{Binding IncidSource3Enabled,
                                                                      Mode=OneWay}"
                                                  IsReadOnly="False"
                                                  ItemsSource="{Binding Source3HabitatTypeCodes,
                                                                        ConverterParameter=code^name^description^sort_order,
                                                                        Converter={StaticResource codeNameDescriptionConverter},
                                                                        UpdateSourceTrigger=PropertyChanged}"
                                                  SelectedValue="{Binding IncidSource3HabitatType,
                                                                          ConverterParameter=code^name^description^sort_order,
                                                                          Converter={StaticResource codeNameDescriptionConverter},
                                                                          ValidatesOnDataErrors=True}"
                                                  SelectedValuePath="code"
                                                  Tag="ErrorContent"
                                                  ToolTipService.ShowOnDisabled="True" />
                                        <CheckBox x:Name="CheckBoxCopyIncidSource3HabitatType"
                                                  Grid.Row="3"
                                                  Grid.Column="3"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource3HabitatType,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />

                                        <Label x:Name="LabelIncidSource3BoundaryImportance"
                                               Grid.Row="4"
                                               Grid.Column="0"
											   Grid.ColumnSpan="2"
                                               HorizontalAlignment="Right"
                                               VerticalAlignment="Center"
                                               Content="Boundary Imp." />
                                        <Grid x:Name="GridSource3Importance"
                                              Grid.Row="4"
                                              Grid.Column="2">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition Width="20" />
                                                <ColumnDefinition Width="10" />
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>

                                            <ComboBox x:Name="ComboBoxIncidSource3BoundaryImportance"
                                                      Grid.Row="0"
                                                      Grid.Column="0"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="True"
                                                      IsEnabled="{Binding IncidSource3Enabled,
                                                                          Mode=OneWay}"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding SourceImportanceCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedValue="{Binding IncidSource3BoundaryImportance,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="ErrorContent"
                                                      ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox x:Name="CheckBoxCopySource3BoundaryImportance"
                                                      Grid.Row="0"
                                                      Grid.Column="1"
                                                      HorizontalAlignment="Right"
                                                      VerticalAlignment="Center"
                                                      IsChecked="{Binding CopySwitches.CopyIncidSource3BoundaryImportance,
                                                                          Mode=TwoWay,
                                                                          UpdateSourceTrigger=PropertyChanged}" />

                                            <Label x:Name="LabelIncidSource3HabitatImportance"
                                                   Grid.Row="0"
                                                   Grid.Column="3"
                                                   HorizontalAlignment="Right"
                                                   VerticalAlignment="Center"
                                                   Content="Habitat Imp." />
                                            <ComboBox x:Name="ComboBoxIncidSource3HabitatImportance"
                                                      Grid.Row="3"
                                                      Grid.Column="4"
                                                      VerticalAlignment="Center"
                                                      DisplayMemberPath="description"
                                                      IsEditable="True"
                                                      IsEnabled="{Binding IncidSource3Enabled,
                                                                          Mode=OneWay}"
                                                      IsReadOnly="False"
                                                      ItemsSource="{Binding SourceImportanceCodes,
                                                                            UpdateSourceTrigger=PropertyChanged}"
                                                      SelectedValue="{Binding IncidSource3HabitatImportance,
                                                                              ValidatesOnDataErrors=True}"
                                                      SelectedValuePath="code"
                                                      Tag="ErrorContent"
                                                      ToolTipService.ShowOnDisabled="True" />
                                        </Grid>
                                        <CheckBox x:Name="CheckBoxCopySource3HabitatImportance"
                                                  Grid.Row="4"
                                                  Grid.Column="3"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  IsChecked="{Binding CopySwitches.CopyIncidSource3HabitatImportance,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                    </Grid>
                                </GroupBox>
                            </Grid>
                        </ScrollViewer>
                    </AdornerDecorator>
                </TabItem>

                <!--  TabItemHistory  -->
                <TabItem x:Name="TabItemHistory" IsEnabled="{Binding TabItemHistoryEnabled}">
                    <TabItem.Header>
                        <StackPanel>
                            <Label VerticalAlignment="Bottom"
                                   Content="History"
                                   FontSize="12"
                                   FontWeight="Medium"
                                   Margin="0,0,0,0"
                                   Padding="0,0,0,0" />
                        </StackPanel>
                    </TabItem.Header>
                    <AdornerDecorator>
                        <Grid x:Name="GridTabItemHistory">
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <!--
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                -->
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80" />
                                <ColumnDefinition />
                                <ColumnDefinition Width="20" />
                            </Grid.ColumnDefinitions>

                            <GroupBox x:Name="GroupBoxModificationHistory"
                                      Grid.Row="0"
                                      Grid.Column="0"
                                      Grid.ColumnSpan="3">
                                <!-- Header="Modification History"> -->
                                <ScrollViewer Margin="0,0,-4,-4" VerticalScrollBarVisibility="Auto">
                                    <ItemsControl x:Name="ItemsControlModificationHistory"
                                                  Grid.Row="0"
                                                  MinHeight="280"
                                                  Margin="0,0,0,0"
                                                  BorderThickness="2"
                                                  ItemsSource="{Binding IncidHistory,
                                                                        Mode=OneWay,
                                                                        UpdateSourceTrigger=PropertyChanged}">
                                        <!-- <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                                <hlu:UniformGrid2 Orientation="Horizontal" Columns="1" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel> -->
                                    </ItemsControl>
                                </ScrollViewer>
                            </GroupBox>
                        </Grid>
                    </AdornerDecorator>
                </TabItem>
            </TabControl>

            <!--  ButtonGetMapSelection  -->
            <Button x:Name="ButtonGetMapSelection"
                    Grid.Row="1"
                    Grid.Column="1"
                    MinWidth="0"
                    Width="22"
                    MinHeight="22"
                    Height="22"
                    Margin="0,2,6,0"
                    Padding="0,0,0,0"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Command="{Binding ReadMapSelectionCommand}"
                    IsEnabled="{Binding CanReadMapSelection}"
                    ToolTip="Get Map Selection"
                    ToolTipService.ShowOnDisabled="True"
                    Style="{DynamicResource Esri_Button}">
                <Image Source="{Binding Path=ButtonReadMapSelectionImg}" Width="16" Height="16" />
            </Button>

            <!--  GridStatus  -->
            <Grid x:Name="GridStatus"
                  Grid.Row="2"
                  Margin="0,4,0,4"
                  IsEnabled="{Binding WindowEnabled}"
				  Visibility="{Binding Path=HideInOSMMUpdateMode}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <Grid x:Name="GridBulkUpdate"
                      Grid.Column="0"
                      Height="23"
                      VerticalAlignment="Bottom"
                      Visibility="{Binding Path=ShowInBulkUpdateMode}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Label x:Name="LabelBulkUpdate"
                           Margin="0,0,4,0"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="Bulk Update Affected:"
                           FontStretch="UltraExpanded"
                           FontWeight="Bold" />
                    <!-- Style="{DynamicResource LabelReverseStyle}" /> -->
                </Grid>

                <Grid x:Name="GridNavigation"
                      Grid.Column="0"
                      Height="23"
                      VerticalAlignment="Bottom"
                      Visibility="{Binding Path=HideInBulkUpdateMode}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="60" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <Label x:Name="LabelNavigation"
                           Grid.Column="0"
                           Margin="0,0,0,0"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="INCID:" />
                    <!-- Style="{DynamicResource LabelReverseStyle}" /> -->
                    <Button x:Name="ButtonFirstRecord"
                            Grid.Column="1"
                            Margin="0,0,2,0"
                            Command="{Binding Path=NavigateFirstCommand}"
                            Style="{DynamicResource Esri_ButtonUpSmall}"
                            ToolTip="First record">
                    </Button>
                    <Button Name="ButtonPreviousRecord"
                            Grid.Column="2"
                            Margin="2,0,2,0"
                            Command="{Binding Path=NavigatePreviousCommand}"
                            Style="{DynamicResource Esri_ButtonBackSmall}"
                            ToolTip="Previous record">
                    </Button>
                    <TextBox Name="TextBoxRecordNumber"
                             Grid.Column="3"
                             Margin="2,0,2,0"
                             Text="{Binding IncidCurrentRowIndex,
                                            Mode=TwoWay,
                                            ValidatesOnDataErrors=True}"
                             Tag="ErrorContent"
                             TextAlignment="Center"
                             VerticalAlignment="Center"/>
                    <Button x:Name="ButtonNextRecord"
                            Grid.Column="4"
                            Margin="2,0,2,0"
                            Command="{Binding Path=NavigateNextCommand}"
                            Style="{DynamicResource Esri_ButtonForwardSmall}"
                            ToolTip="Next record">
                    </Button>
                    <Button Name="ButtonLastRecord"
                            Grid.Column="5"
                            Margin="2,0,0,0"
                            Command="{Binding Path=NavigateLastCommand}"
                            Style="{DynamicResource Esri_ButtonDownSmall}"
                            ToolTip="Last record">
                    </Button>
                </Grid>

                <Grid x:Name="GridLabelStatusIncid"
                      Grid.Column="1"
                      Height="23"
                      VerticalAlignment="Bottom">
                    <Label x:Name="LabelStatusIncid"
                           Grid.Column="0"
                           Margin="0,0,4,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Center"
                           Content="{Binding StatusIncid,
                                             UpdateSourceTrigger=PropertyChanged}"
                           ToolTip="{Binding StatusIncidToolTip,
                                             UpdateSourceTrigger=PropertyChanged}" />
                    <!-- MouseDoubleClick="LabelStatusIncid_MouseDoubleClick" -->
                    <!-- Style="{DynamicResource LabelReverseStyle}" -->
                </Grid>

                <Grid x:Name="GridCommandButtons"
                      Grid.Column="2"
                      Height="23"
                      HorizontalAlignment="Right"
                      VerticalAlignment="Bottom">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="50" />
                        <ColumnDefinition Width="50" />
                    </Grid.ColumnDefinitions>

                    <Button x:Name="ButtonCancelBulkUpdate"
                            Grid.Column="1"
                            Margin="0,0,2,0"
                            Command="{Binding Path=CancelBulkUpdateCommand}"
                            Visibility="{Binding Path=ShowInBulkUpdateMode}"
                            HorizontalAlignment="Center"
                            Style="{DynamicResource Esri_Button}">
                        _Cancel
                    </Button>
                    <Button x:Name="ButtonUpdate"
                            Grid.Column="2"
                            Margin="2,0,6,0"
                            Background="Red"
                            Command="{Binding UpdateCommand}"
                            Content="Appl_y"
                            Foreground="White"
                            HorizontalAlignment="Center"
                            IsEnabled="{Binding CanUpdate}"
                            Style="{DynamicResource Esri_Button}" />
                </Grid>
            </Grid>

            <!--  GridStatusOSMM  -->
            <Grid x:Name="GridStatusOSMM"
                  Grid.Row="2"
                  Margin="0,4,0,4"
				  Visibility="{Binding Path=ShowInOSMMUpdateMode}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Grid x:Name="GridOSMMNavigation"
                      Grid.Column="0"
                      Height="23"
                      VerticalAlignment="Bottom"
                      Visibility="{Binding HideInBulkUpdateMode}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="40" />
                        <ColumnDefinition Width="60" />
                    </Grid.ColumnDefinitions>
                    <Label x:Name="LabelOSMMNavigation"
                           Grid.Column="0"
                           Margin="0,0,4,0"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Content="INCID:" />
                    <!-- Style="{DynamicResource LabelReverseStyle}" /> -->
                    <TextBox x:Name="TextBoxOSMMRecordNumber"
                             Grid.Column="1"
                             Margin="2,0,0,0"
                             IsReadOnly="True"
                             TextAlignment="Center"
                             Text="{Binding OSMMIncidCurrentRowIndex,
                                            Mode=OneWay}"
							  />
                </Grid>

                <Grid x:Name="GridOSMMLabelStatusIncid"
                      Grid.Column="1"
                      Height="23"
                      VerticalAlignment="Bottom">
                    <Label x:Name="LabelOSMMStatusIncid"
                           Grid.Column="0"
                           Margin="8,0,4,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Center"
                           Content="{Binding StatusIncid,
                                             UpdateSourceTrigger=PropertyChanged}"
                           ToolTip="{Binding StatusIncidToolTip,
                                             UpdateSourceTrigger=PropertyChanged}" />
                    <!-- MouseDoubleClick="LabelStatusIncid_MouseDoubleClick" -->
                    <!-- Style="{DynamicResource LabelReverseStyle}" -->
                </Grid>

                <Grid x:Name="GridOSMMCommandButtons"
                      Grid.Column="2"
                      Height="23"
                      HorizontalAlignment="Right"
                      VerticalAlignment="Bottom">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="70" />
                        <ColumnDefinition Width="70" />
                        <ColumnDefinition Width="70" />
                    </Grid.ColumnDefinitions>
                    <Button x:Name="ButtonOSMMSkip"
                            Grid.Column="0"
                            Margin="2,0,0,0"
                            Background="#FF939393"
                            Command="{Binding OSMMSkipCommand}"
                            Content="_Skip"
                            Foreground="White"
                            IsEnabled="{Binding CanOSMMSkip, UpdateSourceTrigger=PropertyChanged}" />
                    <Button x:Name="ButtonOSMMReject"
                            Grid.Column="1"
                            Margin="2,0,0,0"
                            Background="DarkOrange"
                            Command="{Binding OSMMRejectCommand}"
                            Content="{Binding OSMMRejectText}"
                            Foreground="White"
                            IsEnabled="{Binding CanOSMMAccept}"
	                        ToolTip="Hold down 'Ctrl' key to reject all remaining records in filter"
		                    ToolTipService.ShowOnDisabled="True"
							Tag="{Binding OSMMRejectTag,
                                          Mode=TwoWay,
							              UpdateSourceTrigger=PropertyChanged}" />
                    <Button x:Name="ButtonOSMMAccept"
                            Grid.Column="2"
                            Margin="2,0,0,0"
                            Background="DarkGreen"
                            Command="{Binding OSMMAcceptCommand}"
                            Content="{Binding OSMMAcceptText}"
                            Foreground="White"
                            IsEnabled="{Binding CanOSMMAccept}"
	                        ToolTip="Hold down 'Ctrl' key to accept all remaining records in filter"
		                    ToolTipService.ShowOnDisabled="True"
							Tag="{Binding OSMMAcceptTag,
                                          Mode=TwoWay,
							              UpdateSourceTrigger=PropertyChanged}" />
                </Grid>
            </Grid>

            <Separator Grid.Row="3" />

            <Grid Name="GridProcessStatus" Grid.Row="4" Margin="6,6,6,0" Visibility="{Binding IsProcessing}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="22" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <controls:CircularAnimationControl
                Grid.Column="0"
                Foreground="{DynamicResource Esri_BorderSelectedBrush }"
                SpeedRatio="0.5"
                Width="22"
                Height="22"
                Visibility="{Binding IsProcessing}" />
                <TextBlock Name="TextBlockProcess"
                        Grid.Column="1"
                        Margin="5,0,0,0"
                        VerticalAlignment="Center"
                        Text="{Binding ProcessStatus}" />
            </Grid>

            <Grid Name="GridProgressAnimation" Grid.Row="6" Margin="6,6,6,0" Visibility="{Binding ProgressAnimating}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <ProgressBar x:Name="ProgressBar"
                            Grid.Column="0"
                            Height="22"
                            Margin="0,0,6,0"
                            HorizontalAlignment="Stretch"
                            Minimum="0"
                            Maximum="{Binding Path=MaxProgressValue, Mode=OneWay}"
                            Value="{Binding Path=ProgressValue, Mode=OneWay}" />
                <TextBlock Text="{Binding ProgressText}"
                        Grid.Column="0"
                        Margin="0,0,6,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center" />
            </Grid>

            <Grid Name="GridButtons" Grid.Row="7" Margin="6,6,6,6">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="70" />
                </Grid.ColumnDefinitions>

                <Button Name="ButtonRun"
                    Grid.Column="1"
                    Margin="0,0,0,0"
                    Padding="0"
                    MinWidth="0"
                    Height="0"
                    BorderBrush="LightBlue"
                    Command="{Binding Path=RunCommand}"
                    IsCancel="False"
                    IsDefault="False"
                    Focusable="False"
                    IsEnabled="{Binding Path=RunButtonEnabled}"
                    TabIndex="2"
                    Style="{DynamicResource Esri_SimpleButton}">
                    <StackPanel Orientation="Horizontal">
                        <Image Source="{Binding ButtonRunImg}" Width="16" Height="16" />
                        <Label Content="Sync" Padding="4,0,0,0" />
                    </StackPanel>
                    <Button.ToolTip>
                        <ToolTip>
                            <TextBlock Text="Run the sync to update the remote table" FontWeight="Normal"></TextBlock>
                        </ToolTip>
                    </Button.ToolTip>
                </Button>
            </Grid>
        </Grid>
    </DockPanel>
</UserControl>
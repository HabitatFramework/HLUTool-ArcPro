<UserControl
    x:Class="HLU.UI.View.WindowMain"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:ArcGIS.Desktop.Framework.Controls;assembly=ArcGIS.Desktop.Framework"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:extensions="clr-namespace:ArcGIS.Desktop.Extensions;assembly=ArcGIS.Desktop.Extensions"
    xmlns:local="clr-namespace:HLU.UI.ViewModel"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:view="clr-namespace:HLU.UI.View"
    x:Name="MainUserControl"
    d:DataContext="{d:DesignInstance Type=local:ViewModelWindowMain}"
    d:DesignHeight="600"
    d:DesignWidth="300"
    mc:Ignorable="d">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <extensions:DesignOnlyResourceDictionary Source="pack://application:,,,/ArcGIS.Desktop.Framework;component\Themes\Default.xaml" />
                <ResourceDictionary Source="Dictionary\CodeDescriptionConverterDictionary.xaml" />
                <ResourceDictionary Source="Dictionary\CodeDescriptionBoolConverterDictionary.xaml" />
                <ResourceDictionary Source="Dictionary\CodeNameDescriptionConverterDictionary.xaml" />
                <ResourceDictionary Source="Dictionary\VagueDateConverterDictionary.xaml" />
                <ResourceDictionary Source="Dictionary\ErrorMessageConverterDictionary.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <DockPanel
        Width="Auto"
        Margin="0,0,0,0"
        HorizontalAlignment="Stretch"
        VerticalAlignment="Stretch"
        Cursor="{Binding WindowCursor}">

        <Grid x:Name="Panel">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <Grid
                x:Name="GridMain"
                Grid.Row="0"
                Visibility="{Binding GridMainVisibility}">

                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!--  GroupBoxTopControlsBulkUpdate  -->
                <GroupBox
                    x:Name="GroupBoxTopControlsBulkUpdate"
                    Grid.Row="0"
                    Grid.Column="0"
                    Header="{Binding TopControlsBulkUpdateGroupHeader}"
                    Visibility="{Binding ShowInBulkUpdateMode}">
                    <Grid
                        x:Name="GridTopControlsBulkUpdate"
                        Grid.Row="0"
                        Margin="0,0,0,0"
                        Panel.ZIndex="0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <Grid
                            x:Name="GridBulkRecordCounts"
                            Grid.Row="0"
                            Grid.RowSpan="2"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Center">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="100" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="100" />
                            </Grid.ColumnDefinitions>

                            <Label
                                x:Name="LabelBulkUpdateStatusIncidDB"
                                Grid.Row="0"
                                Grid.Column="0"
                                Margin="0,0,0,4"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Content="Database INCIDs" />
                            <TextBox
                                x:Name="TextBoxBulkUpdateStatusIncidDB"
                                Grid.Row="0"
                                Grid.Column="1"
                                Margin="0,0,0,4"
                                VerticalAlignment="Center"
                                IsEnabled="False"
                                IsReadOnly="True"
                                Text="{Binding NumIncidSelectedDB, Mode=OneWay}"
                                TextAlignment="Left" />

                            <Label
                                x:Name="LabelBulkUpdateStatusToidDB"
                                Grid.Row="1"
                                Grid.Column="0"
                                Margin="0,0,0,4"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Content="Database TOIDs" />
                            <TextBox
                                x:Name="TextBoxBulkUpdateStatusToidDB"
                                Grid.Row="1"
                                Grid.Column="1"
                                Margin="0,0,6,4"
                                VerticalAlignment="Center"
                                IsEnabled="False"
                                IsReadOnly="True"
                                Text="{Binding NumToidSelectedDB, Mode=OneWay}"
                                TextAlignment="Left" />

                            <Label
                                x:Name="LabelBulkUpdateStatusFragDB"
                                Grid.Row="2"
                                Grid.Column="0"
                                Margin="0,0,0,2"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Content="Database Fragments" />
                            <TextBox
                                x:Name="TextBoxBulkUpdateStatusFragDB"
                                Grid.Row="2"
                                Grid.Column="1"
                                Margin="0,0,0,2"
                                VerticalAlignment="Center"
                                IsEnabled="False"
                                IsReadOnly="True"
                                Text="{Binding NumFragmentsSelectedDB, Mode=OneWay}"
                                TextAlignment="Left" />

                            <Label
                                x:Name="LabelBulkUpdateStatusMap"
                                Grid.Row="0"
                                Grid.Column="2"
                                Margin="0,0,0,4"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Content="Map INCIDs" />
                            <TextBox
                                x:Name="TextBoxBulkUpdateStatusIncidMap"
                                Grid.Row="0"
                                Grid.Column="3"
                                Margin="0,0,0,4"
                                VerticalAlignment="Center"
                                IsEnabled="False"
                                IsReadOnly="True"
                                Tag="ErrorContent"
                                Text="{Binding NumIncidSelectedMap, Mode=OneWay, ValidatesOnDataErrors=True}"
                                TextAlignment="Left"
                                ToolTipService.ShowOnDisabled="True" />

                            <Label
                                x:Name="LabelBulkUpdateStatusToidMap"
                                Grid.Row="1"
                                Grid.Column="2"
                                Margin="0,0,0,4"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Content="Map TOIDs" />
                            <TextBox
                                x:Name="TextBoxBulkUpdateStatusToidMap"
                                Grid.Row="1"
                                Grid.Column="3"
                                Margin="8,0,8,4"
                                VerticalAlignment="Center"
                                IsEnabled="False"
                                IsReadOnly="True"
                                Tag="ErrorContent"
                                Text="{Binding NumToidSelectedMap, Mode=OneWay, ValidatesOnDataErrors=True}"
                                TextAlignment="Left"
                                ToolTipService.ShowOnDisabled="True" />
                            <Label
                                x:Name="LabelBulkUpdateStatusFragMap"
                                Grid.Row="2"
                                Grid.Column="2"
                                Margin="0,0,0,2"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Content="Map Fragments" />
                            <TextBox
                                x:Name="TextBoxBulkUpdateStatusFragMap"
                                Grid.Row="2"
                                Grid.Column="3"
                                Margin="0,0,6,2"
                                VerticalAlignment="Center"
                                IsEnabled="False"
                                IsReadOnly="True"
                                Tag="ErrorContent"
                                Text="{Binding NumFragmentsSelectedMap, Mode=OneWay, ValidatesOnDataErrors=True}"
                                TextAlignment="Left"
                                ToolTipService.ShowOnDisabled="True" />
                        </Grid>
                    </Grid>
                </GroupBox>

                <!--  GroupBoxTopControls  -->
                <GroupBox
                    x:Name="GroupBoxTopControls"
                    Grid.Row="0"
                    Grid.Column="0"
                    Margin="2,0,2,0"
                    Header="{Binding TopControlsGroupHeader}"
                    Visibility="{Binding HideInBulkUpdateMode}">

                    <Grid
                        x:Name="GridTopControls"
                        Grid.Row="0"
                        Margin="0,0,0,0"
                        Panel.ZIndex="1">

                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <Grid x:Name="GridIncidDetails" Grid.Row="0">

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="60" />
                                <ColumnDefinition Width="80" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>

                            <Label
                                x:Name="LabelIncid"
                                Grid.Row="0"
                                Grid.Column="0"
                                Margin="0,0,0,4"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Content="INCID" />
                            <TextBox
                                x:Name="TextBoxIncid"
                                Grid.Row="0"
                                Grid.Column="1"
                                Margin="0,0,0,4"
                                VerticalAlignment="Center"
                                IsEnabled="{Binding TabControlDataEnabled}"
                                IsReadOnly="True"
                                Text="{Binding Path=Incid, Mode=OneWay, ValidatesOnDataErrors=False}" />
                            <Label
                                x:Name="LabelIncidArea"
                                Grid.Row="0"
                                Grid.Column="2"
                                Margin="6,0,0,4"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Content="Area [ha]" />
                            <TextBox
                                x:Name="TextBoxIncidArea"
                                Grid.Row="0"
                                Grid.Column="3"
                                Margin="0,0,0,4"
                                VerticalAlignment="Center"
                                IsEnabled="False"
                                IsReadOnly="True"
                                Text="{Binding IncidArea, Mode=OneWay, ValidatesOnDataErrors=False}"
                                TextAlignment="Right" />
                            <Label
                                x:Name="LabelIncidLength"
                                Grid.Row="0"
                                Grid.Column="4"
                                Margin="6,0,0,4"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Content="Length [km]" />
                            <TextBox
                                x:Name="TextBoxIncidLength"
                                Grid.Row="0"
                                Grid.Column="5"
                                Margin="0,0,2,4"
                                VerticalAlignment="Center"
                                IsEnabled="False"
                                IsReadOnly="True"
                                Text="{Binding IncidLength, Mode=OneWay, ValidatesOnDataErrors=False}"
                                TextAlignment="Right" />
                        </Grid>

                        <Grid x:Name="GridIncidDateUser" Grid.Row="1">

                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="60" />
                                <ColumnDefinition />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>

                            <Label
                                x:Name="LabelIncidCreatedDate"
                                Grid.Row="0"
                                Grid.Column="0"
                                Margin="8,0,0,4"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center">
                                Created
                            </Label>
                            <TextBox
                                x:Name="TextBoxIncidCreatedDate"
                                Grid.Row="0"
                                Grid.Column="1"
                                Margin="0,0,0,4"
                                VerticalAlignment="Center"
                                IsEnabled="False"
                                IsReadOnly="True"
                                Text="{Binding IncidCreatedDate, Mode=OneWay, ValidatesOnDataErrors=False}"
                                TextAlignment="Left" />

                            <Label
                                x:Name="LabelIncidCreatedUser"
                                Grid.Row="0"
                                Grid.Column="2"
                                Margin="6,0,0,4"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Center">
                                By
                            </Label>
                            <TextBox
                                x:Name="TextBoxIncidCreatedUser"
                                Grid.Row="0"
                                Grid.Column="3"
                                Margin="0,0,2,4"
                                VerticalAlignment="Center"
                                IsEnabled="False"
                                IsReadOnly="True"
                                Text="{Binding IncidCreatedUser, Mode=OneWay, ValidatesOnDataErrors=False}"
                                TextAlignment="Left" />

                            <Label
                                x:Name="LabelIncidLastModDate"
                                Grid.Row="1"
                                Grid.Column="0"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center">
                                Modified
                            </Label>
                            <TextBox
                                x:Name="TextBoxIncidLastModDate"
                                Grid.Row="1"
                                Grid.Column="1"
                                Margin="0,0,0,0"
                                VerticalAlignment="Center"
                                IsEnabled="False"
                                IsReadOnly="True"
                                Text="{Binding IncidLastModifiedDate, Mode=OneWay, ValidatesOnDataErrors=False}"
                                TextAlignment="Left" />

                            <Label
                                x:Name="LabelIncidLastModUser"
                                Grid.Row="1"
                                Grid.Column="2"
                                Margin="6,0,0,0"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Center">
                                By
                            </Label>
                            <TextBox
                                x:Name="TextBoxIncidLastModUser"
                                Grid.Row="1"
                                Grid.Column="3"
                                Margin="0,0,2,0"
                                VerticalAlignment="Center"
                                IsEnabled="False"
                                IsReadOnly="True"
                                Text="{Binding IncidLastModifiedUser, Mode=OneWay, ValidatesOnDataErrors=False}"
                                TextAlignment="Left" />

                        </Grid>
                    </Grid>
                </GroupBox>

                <!--  TabControlData  -->
                <TabControl
                    x:Name="TabControlData"
                    Grid.Row="1"
                    Grid.Column="0"
                    Margin="0,0,0,0"
                    IsEnabled="{Binding TabControlDataEnabled}"
                    SelectedIndex="{Binding TabItemSelected, Mode=TwoWay}">

                    <!--  TabItemHabitat  -->
                    <TabItem
                        x:Name="TabItemHabitat"
                        Height="24"
                        VerticalAlignment="Bottom"
                        IsEnabled="{Binding TabItemHabitatEnabled}">

                        <TabItem.Header>
                            <StackPanel>
                                <Label
                                    x:Name="HabitatTabLabel"
                                    Margin="0,0,0,0"
                                    Padding="0,0,0,0"
                                    VerticalAlignment="Bottom"
                                    Content="{Binding HabitatTabLabel, ValidatesOnDataErrors=True}"
                                    FontSize="12"
                                    FontWeight="Medium"
                                    Tag="{Binding (Validation.Errors).CurrentItem.ErrorContent, Converter={StaticResource errorMessageConverter}, Mode=OneWay, RelativeSource={RelativeSource Self}}"
                                    ToolTipService.ShowOnDisabled="True" />
                            </StackPanel>
                        </TabItem.Header>

                        <AdornerDecorator>
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <Grid x:Name="GridTabItemHabitat">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" MinHeight="8" />
                                        <RowDefinition Height="Auto" MinHeight="8" />
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="Auto" MinHeight="8" />
                                        <RowDefinition Height="Auto" MinHeight="8" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="19*" />
                                        <ColumnDefinition Width="439*" />
                                        <ColumnDefinition Width="6*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <!--  GroupBoxHabitatCategories  -->
                                    <GroupBox
                                        x:Name="GroupBoxHabitatCategories"
                                        Grid.Row="0"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="4"
                                        VerticalAlignment="Stretch"
                                        Header="{Binding HabitatHeader}"
                                        IsEnabled="{Binding TabHabitatControlsEnabled}"
                                        Visibility="{Binding ShowSourceHabitatGroup}">
                                        <Grid x:Name="GridCategories">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" MinWidth="80" />
                                                <ColumnDefinition Width="358*" />
                                                <ColumnDefinition Width="20" />
                                            </Grid.ColumnDefinitions>

                                            <Label
                                                x:Name="LabelHabitatClass"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="0,0,0,2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Habitat Class" />
                                            <ComboBox
                                                x:Name="ComboBoxHabitatClass"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Margin="0,0,0,2"
                                                VerticalAlignment="Center"
                                                DisplayMemberPath="description"
                                                IsEditable="True"
                                                IsReadOnly="False"
                                                IsTextSearchEnabled="True"
                                                ItemsSource="{Binding HabitatClassCodes}"
                                                SelectedValue="{Binding HabitatClass}"
                                                SelectedValuePath="code"
                                                ToolTipService.ShowOnDisabled="True" />

                                            <Label
                                                x:Name="LabelHabitatType"
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                Margin="0,2,0,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Habitat Type" />
                                            <ComboBox
                                                x:Name="ComboBoxHabitatType"
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                Margin="0,2,0,0"
                                                VerticalAlignment="Center"
                                                DisplayMemberPath="description"
                                                IsEditable="True"
                                                IsReadOnly="False"
                                                IsTextSearchEnabled="True"
                                                ItemsSource="{Binding HabitatTypeCodes, ConverterParameter=code^name^description^sort_order, Converter={StaticResource codeNameDescriptionConverter}}"
                                                SelectedValue="{Binding HabitatType, ValidatesOnDataErrors=True}"
                                                SelectedValuePath="code"
                                                Tag="ErrorContent"
                                                ToolTipService.ShowOnDisabled="True" />
                                        </Grid>
                                    </GroupBox>

                                    <!--  GroupBoxPrimary  -->
                                    <GroupBox
                                        x:Name="GroupBoxPrimary"
                                        Grid.Row="1"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="4"
                                        VerticalAlignment="Stretch"
                                        Header="{Binding PrimaryHeader}"
                                        IsEnabled="{Binding TabHabitatControlsEnabled}">
                                        <Grid x:Name="GridPrimary">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" MinWidth="80" />
                                                <ColumnDefinition Width="358*" />
                                                <ColumnDefinition Width="20" />
                                            </Grid.ColumnDefinitions>
                                            <Label
                                                x:Name="LabelPrimary"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="0,0,0,2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Primary" />
                                            <ComboBox
                                                x:Name="ComboBoxPrimary"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Margin="0,0,0,2"
                                                VerticalAlignment="Center"
                                                IsEditable="True"
                                                IsEnabled="{Binding PrimaryEnabled, Mode=OneWay}"
                                                IsReadOnly="False"
                                                IsTextSearchEnabled="True"
                                                ItemsSource="{Binding PrimaryCodes}"
                                                SelectedValue="{Binding IncidPrimary, ValidatesOnDataErrors=True}"
                                                SelectedValuePath="code"
                                                Tag="ErrorContent"
                                                Text="{Binding SelectedPrimaryDisplay, Mode=OneWay}"
                                                TextSearch.TextPath="display">
                                                <ComboBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <TextBlock Text="{Binding display}">
                                                            <TextBlock.Style>
                                                                <Style TargetType="TextBlock">
                                                                    <!--  Default to ArcGIS Pro theme color  -->
                                                                    <Setter Property="Foreground" Value="{DynamicResource SystemBaseHighColor}" />

                                                                    <!--  Only override Foreground for preferred items  -->
                                                                    <Style.Triggers>
                                                                        <DataTrigger Binding="{Binding preferred}" Value="False">
                                                                            <Setter Property="Foreground" Value="{DynamicResource SystemBaseHighColor}" />
                                                                            <Setter Property="FontWeight" Value="Normal" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding preferred}" Value="True">
                                                                            <Setter Property="Foreground" Value="DarkGreen" />
                                                                            <Setter Property="FontWeight" Value="Medium" />
                                                                        </DataTrigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </TextBlock.Style>
                                                        </TextBlock>
                                                    </DataTemplate>
                                                </ComboBox.ItemTemplate>
                                            </ComboBox>
                                            <!--  DisplayMemberPath="description"  -->
                                            <CheckBox
                                                x:Name="CheckBoxCopyPrimary"
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                Margin="0,0,0,2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidPrimary, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <Label
                                                x:Name="LabelNvcCodes"
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                Margin="0,2,0,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="NVC Codes"
                                                Visibility="{Binding ShowNVCCodes}" />
                                            <TextBox
                                                x:Name="TextBoxNvcCodes"
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                Height="22"
                                                Margin="0,2,0,0"
                                                VerticalAlignment="Center"
                                                BorderBrush="Black"
                                                BorderThickness="1"
                                                IsEnabled="False"
                                                Text="{Binding NvcCodes, Mode=OneWay}"
                                                ToolTip="{Binding NvcCodes}"
                                                ToolTipService.ShowOnDisabled="True"
                                                Visibility="{Binding ShowNVCCodes}" />
                                        </Grid>
                                    </GroupBox>

                                    <GroupBox
                                        x:Name="GroupBoxSecondaryHabitats"
                                        Grid.Row="2"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="4"
                                        VerticalAlignment="Stretch"
                                        Header="{Binding SecondaryHabitatsHeader}"
                                        IsEnabled="{Binding TabHabitatControlsEnabled}">
                                        <Grid x:Name="GridSecondaryHabitats" Margin="0,2,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto " />
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" MinWidth="80" />
                                                <ColumnDefinition Width="358*" />
                                                <ColumnDefinition Width="20" />
                                            </Grid.ColumnDefinitions>

                                            <Label
                                                x:Name="LabelHabitatSecondariesMandatory"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="0,0,0,2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Mandatory"
                                                Visibility="Visible" />
                                            <TextBox
                                                x:Name="TextBoxHabitatSecondariesMandatory"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Height="22"
                                                Margin="0,0,0,2"
                                                VerticalAlignment="Center"
                                                IsEnabled="False"
                                                IsReadOnly="True"
                                                Tag="ErrorContent"
                                                Text="{Binding HabitatSecondariesMandatory, Mode=OneWay, ValidatesOnDataErrors=True}"
                                                ToolTipService.ShowOnDisabled="True"
                                                Visibility="Visible" />

                                            <Label
                                                x:Name="LabelHabitatSecondariesSuggested"
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                Margin="0,2,0,2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Suggested"
                                                Visibility="{Binding ShowHabitatSecondariesSuggested}" />
                                            <TextBox
                                                x:Name="TextBoxHabitatSecondariesSuggested"
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                Height="22"
                                                Margin="0,2,0,2"
                                                VerticalAlignment="Center"
                                                IsEnabled="False"
                                                Text="{Binding HabitatSecondariesSuggested, Mode=OneWay}"
                                                ToolTip="{Binding HabitatTips}"
                                                ToolTipService.ShowOnDisabled="True"
                                                Visibility="{Binding ShowHabitatSecondariesSuggested}" />

                                            <Grid
                                                x:Name="GridAddSecondaryHabitat"
                                                Grid.Row="2"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto" MinWidth="100" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>

                                                <!--<Label x:Name="LabelSecondaryGroup"
												   Grid.Row="0"
												   Grid.Column="0"
                                                   Margin="0,8,0,4"
                                                   HorizontalAlignment="Right"
                                                   VerticalAlignment="Center"
                                                   Content="Group" />-->
                                                <ComboBox
                                                    x:Name="ComboBoxSecondaryGroup"
                                                    Grid.Row="0"
                                                    Grid.Column="0"
                                                    Margin="0,4,0,2"
                                                    VerticalAlignment="Center"
                                                    DisplayMemberPath="description"
                                                    IsEditable="True"
                                                    IsEnabled="{Binding SecondaryGroupEnabled}"
                                                    IsReadOnly="False"
                                                    ItemsSource="{Binding SecondaryGroupCodes}"
                                                    SelectedValue="{Binding SecondaryGroup}"
                                                    SelectedValuePath="code"
                                                    ToolTipService.ShowOnDisabled="True" />

                                                <!--<Label x:Name="LabelSecondaryHabitat"
                                                   Grid.Row="0"
                                                   Grid.Column="2"
                                                   Margin="0,2,0,4"
                                                   HorizontalAlignment="Right"
                                                   VerticalAlignment="Center"
                                                   Content="Code" />-->
                                                <ComboBox
                                                    x:Name="ComboBoxSecondaryHabitat"
                                                    Grid.Row="0"
                                                    Grid.Column="1"
                                                    Margin="4,4,6,2"
                                                    VerticalAlignment="Center"
                                                    DisplayMemberPath="description"
                                                    IsEditable="True"
                                                    IsEnabled="{Binding SecondaryHabitatEnabled}"
                                                    IsReadOnly="False"
                                                    IsTextSearchEnabled="True"
                                                    ItemsSource="{Binding SecondaryHabitatCodes, ConverterParameter=code^description^sort_order, Converter={StaticResource codeDescriptionConverter}}"
                                                    SelectedValue="{Binding SecondaryHabitatCode, ValidatesOnDataErrors=True}"
                                                    SelectedValuePath="code"
                                                    Tag="ErrorContent"
                                                    ToolTip="{Binding Path=SelectedItem.description, RelativeSource={RelativeSource Self}}"
                                                    ToolTipService.ShowOnDisabled="True" />
                                            </Grid>

                                            <!--  ButtonAddSecondaryHabitat  -->
                                            <Button
                                                x:Name="ButtonAddSecondaryHabitat"
                                                Grid.Row="2"
                                                Grid.Column="2"
                                                Width="20"
                                                Height="20"
                                                MinWidth="0"
                                                MinHeight="0"
                                                Margin="0,5,0,0"
                                                Padding="0,0,0,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Command="{Binding AddSecondaryHabitatCommand}"
                                                Style="{DynamicResource Esri_Button}"
                                                ToolTip="Add Secondary Habitat"
                                                ToolTipService.ShowOnDisabled="True">
                                                <Image
                                                    Width="16"
                                                    Height="16"
                                                    Source="{Binding ButtonAddSecondaryHabitatImg}" />
                                            </Button>

                                            <!-- <ScrollViewer VerticalScrollBarVisibility="Auto"> -->
                                            <DataGrid
                                                x:Name="DataGridSecondaryHabitats"
                                                Grid.Row="3"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                MinHeight="116"
                                                Margin="0,4,6,0"
                                                Padding="2,0"
                                                AutoGenerateColumns="False"
                                                BorderBrush="Black"
                                                BorderThickness="1"
                                                CanUserAddRows="False"
                                                CanUserDeleteRows="True"
                                                CanUserReorderColumns="False"
                                                CanUserResizeColumns="True"
                                                CanUserSortColumns="False"
                                                HeadersVisibility="All"
                                                IsEnabled="{Binding SecondaryHabitatsEnabled}"
                                                ItemsSource="{Binding IncidSecondaryHabitats, Mode=TwoWay}"
                                                MinRowHeight="24"
                                                PreviewKeyDown="DataGridSecondaryHabitats_PreviewKeyDown"
                                                RowDetailsVisibilityMode="Visible"
                                                RowHeaderWidth="20"
                                                RowHeight="24"
                                                Style="{DynamicResource Esri_DataGrid}"
                                                VerticalScrollBarVisibility="Auto">
                                                <DataGrid.RowValidationRules>
                                                    <DataErrorValidationRule />
                                                </DataGrid.RowValidationRules>
                                                <DataGrid.Columns>
                                                    <DataGridTextColumn
                                                        Binding="{Binding secondary_id}"
                                                        Header="secondary_id"
                                                        IsReadOnly="True"
                                                        Visibility="Collapsed" />
                                                    <DataGridTextColumn
                                                        Binding="{Binding incid}"
                                                        Header="INCID"
                                                        IsReadOnly="True"
                                                        Visibility="Collapsed" />
                                                    <DataGridComboBoxColumn
                                                        x:Name="DataGridComboBoxSecondaryGroup"
                                                        Width="Auto"
                                                        MinWidth="80"
                                                        CanUserResize="True"
                                                        DisplayMemberPath="description"
                                                        Header="Group"
                                                        IsReadOnly="True"
                                                        SelectedValueBinding="{Binding secondary_group, Mode=TwoWay, ConverterParameter=code^description^sort_order, Converter={StaticResource codeDescriptionConverter}, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                        SelectedValuePath="code">
                                                        <DataGridComboBoxColumn.EditingElementStyle>
                                                            <Style TargetType="ComboBox">
                                                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                                                <Setter Property="ItemsSource" Value="{Binding DataContext.SecondaryGroupCodesAll, RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                                            </Style>
                                                        </DataGridComboBoxColumn.EditingElementStyle>
                                                        <DataGridComboBoxColumn.ElementStyle>
                                                            <Style TargetType="ComboBox">
                                                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                                                <Setter Property="ItemsSource" Value="{Binding DataContext.SecondaryGroupCodesAll, RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                                            </Style>
                                                        </DataGridComboBoxColumn.ElementStyle>
                                                    </DataGridComboBoxColumn>

                                                    <DataGridComboBoxColumn
                                                        x:Name="DataGridComboBoxSecondaryCode"
                                                        Width="*"
                                                        CanUserResize="True"
                                                        DisplayMemberPath="description"
                                                        Header="Code"
                                                        IsReadOnly="True"
                                                        SelectedValueBinding="{Binding secondary_habitat, Mode=TwoWay, ConverterParameter=code^description^sort_order, Converter={StaticResource codeDescriptionConverter}, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                        SelectedValuePath="code"
                                                        SortDirection="Ascending">
                                                        <DataGridComboBoxColumn.EditingElementStyle>
                                                            <Style TargetType="ComboBox">
                                                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                                                <Setter Property="ItemsSource" Value="{Binding DataContext.SecondaryHabitatCodesAll, RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                                            </Style>
                                                        </DataGridComboBoxColumn.EditingElementStyle>
                                                        <DataGridComboBoxColumn.ElementStyle>
                                                            <Style TargetType="ComboBox">
                                                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                                                <Setter Property="ItemsSource" Value="{Binding DataContext.SecondaryHabitatCodesAll, RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                                            </Style>
                                                        </DataGridComboBoxColumn.ElementStyle>
                                                    </DataGridComboBoxColumn>
                                                    <!--  EditingElementStyle="{DynamicResource ComboBoxStyle}"  -->
                                                </DataGrid.Columns>
                                            </DataGrid>
                                            <!-- </ScrollViewer> -->

                                            <!--  ButtonAddSecondaryHabitatList  -->
                                            <Button
                                                x:Name="ButtonAddSecondaryHabitatList"
                                                Grid.Row="3"
                                                Grid.Column="2"
                                                Width="20"
                                                Height="20"
                                                MinWidth="0"
                                                MinHeight="0"
                                                Margin="0,5,0,0"
                                                Padding="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Command="{Binding AddSecondaryHabitatListCommand}"
                                                Style="{DynamicResource Esri_Button}"
                                                ToolTip="Add Secondary Habitats from List"
                                                ToolTipService.ShowOnDisabled="True">
                                                <Image
                                                    Width="16"
                                                    Height="16"
                                                    Source="{Binding ButtonAddSecondaryHabitatListImg}" />
                                            </Button>

                                            <CheckBox
                                                x:Name="CheckBoxCopySecondaryHabitats"
                                                Grid.Row="3"
                                                Grid.Column="2"
                                                Margin="0,0,0,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidSecondaryHabitats, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                IsEnabled="{Binding SecondaryHabitatsEnabled}" />
                                        </Grid>
                                    </GroupBox>

                                    <!--  GroupBoxHabitatSummary  -->
                                    <GroupBox
                                        x:Name="GroupBoxSecondarySummary"
                                        Grid.Row="3"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="4"
                                        VerticalAlignment="Stretch"
                                        Header="{Binding HabitatSummaryHeader}"
                                        IsEnabled="{Binding TabHabitatControlsEnabled}"
                                        Visibility="{Binding ShowHabitatSummary}">
                                        <Grid x:Name="GridSecondaries" Margin="0,0,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" MinWidth="80" />
                                                <ColumnDefinition Width="358*" />
                                                <ColumnDefinition Width="20" />
                                            </Grid.ColumnDefinitions>

                                            <Label
                                                x:Name="LabelSecondarySummary"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="0,2,0,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Summary" />
                                            <TextBox
                                                x:Name="TextBoxSecondarySummary"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Margin="0,2,0,0"
                                                VerticalAlignment="Center"
                                                IsReadOnly="True"
                                                Text="{Binding IncidSecondarySummary, Mode=OneWay}" />
                                        </Grid>
                                    </GroupBox>

                                    <!--  GroupBoxLegacy  -->
                                    <GroupBox
                                        x:Name="GroupBoxLegacy"
                                        Grid.Row="4"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="4"
                                        VerticalAlignment="Stretch"
                                        Header="{Binding LegacyHeader}"
                                        IsEnabled="{Binding TabHabitatControlsEnabled}">
                                        <!--  Margin="0"  -->
                                        <Grid x:Name="GridLegacy" Margin="0,2,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" MinWidth="80" />
                                                <ColumnDefinition Width="358*" />
                                                <ColumnDefinition Width="20" />
                                            </Grid.ColumnDefinitions>

                                            <Label
                                                x:Name="LabelLegacyHabitat"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Legacy Hab." />
                                            <ComboBox
                                                x:Name="ComboBoxLegacyHabitat"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                VerticalAlignment="Center"
                                                DisplayMemberPath="description"
                                                IsEditable="True"
                                                IsReadOnly="False"
                                                IsTextSearchEnabled="True"
                                                ItemsSource="{Binding LegacyHabitatCodes}"
                                                SelectedValue="{Binding IncidLegacyHabitat, ValidatesOnDataErrors=True}"
                                                SelectedValuePath="code"
                                                Tag="ErrorContent"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopyLegacyHabitat"
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidLegacyHabitat, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        </Grid>
                                    </GroupBox>
                                </Grid>
                            </ScrollViewer>
                        </AdornerDecorator>

                    </TabItem>

                    <!--  TabItemIHS  -->
                    <TabItem
                        x:Name="TabItemIHS"
                        IsEnabled="{Binding TabItemIHSEnabled}"
                        Visibility="{Binding ShowIHSTab}">

                        <TabItem.Header>
                            <StackPanel>
                                <Label
                                    x:Name="IHSTabLabel"
                                    Margin="4,0,4,0"
                                    Padding="0,0,0,0"
                                    VerticalAlignment="Bottom"
                                    Content="{Binding IHSTabLabel}"
                                    FontSize="12"
                                    FontWeight="Medium"
                                    Tag="{Binding (Validation.Errors).CurrentItem.ErrorContent, Converter={StaticResource errorMessageConverter}, Mode=OneWay, RelativeSource={RelativeSource Self}}"
                                    ToolTipService.ShowOnDisabled="True" />
                            </StackPanel>
                        </TabItem.Header>

                        <AdornerDecorator>
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <Grid x:Name="GridTabItemIHS">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" MinHeight="48" />
                                        <RowDefinition Height="Auto" MinHeight="98" />
                                        <RowDefinition Height="Auto" MinHeight="72" />
                                        <RowDefinition Height="Auto" MinHeight="72" />
                                        <RowDefinition Height="Auto" MinHeight="72" />
                                        <RowDefinition Height="Auto" MinHeight="48" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>

                                    <!--  GroupBoxIhsHabitat  -->
                                    <GroupBox
                                        x:Name="GroupBoxIhsHabitat"
                                        Grid.Row="0"
                                        Grid.Column="0"
                                        Header="{Binding IhsHabitatHeader}"
                                        IsEnabled="{Binding TabIhsControlsEnabled}">

                                        <Grid x:Name="GridIHSHabitat" Margin="0,2,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition MinWidth="70" />
                                                <ColumnDefinition Width="378*" />
                                            </Grid.ColumnDefinitions>

                                            <Label
                                                x:Name="LabelIhsHabitat"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="0,2,0,4"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Habitat" />
                                            <TextBox
                                                x:Name="TextBoxIhsHabitat"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Margin="4,2,0,4"
                                                VerticalAlignment="Center"
                                                IsEnabled="False"
                                                IsReadOnly="True"
                                                Text="{Binding IncidIhsHabitatText, Mode=OneWay}"
                                                ToolTipService.ShowOnDisabled="True" />
                                        </Grid>
                                    </GroupBox>

                                    <!--  GroupBoxIhsMatrix  -->
                                    <GroupBox
                                        x:Name="GroupBoxIhsMatrix"
                                        Grid.Row="1"
                                        Grid.Column="0"
                                        Header="{Binding IhsMatrixHeader}"
                                        IsEnabled="{Binding TabIhsControlsEnabled}">

                                        <Grid x:Name="GridIhsMatrix" Margin="0,2,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition MinWidth="70" />
                                                <ColumnDefinition Width="378*" />
                                            </Grid.ColumnDefinitions>

                                            <Label
                                                x:Name="LabelIhsMatrix1"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="0,2,0,4"
                                                Padding="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Matrix 1" />
                                            <TextBox
                                                x:Name="TextBoxIhsMatrix1"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Margin="4,2,0,4"
                                                VerticalAlignment="Center"
                                                IsEnabled="False"
                                                IsReadOnly="True"
                                                Text="{Binding IncidIhsMatrix1Text, Mode=OneWay}"
                                                ToolTipService.ShowOnDisabled="True" />

                                            <Label
                                                x:Name="LabelIhsMatrix2"
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                Margin="0,2,0,4"
                                                Padding="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Matrix 2" />
                                            <TextBox
                                                x:Name="TextBoxIhsMatrix2"
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                Margin="4,2,0,4"
                                                VerticalAlignment="Center"
                                                IsEnabled="False"
                                                IsReadOnly="True"
                                                Text="{Binding IncidIhsMatrix2Text, Mode=OneWay}"
                                                ToolTipService.ShowOnDisabled="True" />

                                            <Label
                                                x:Name="LabelIhsMatrix3"
                                                Grid.Row="2"
                                                Grid.Column="0"
                                                Margin="0,2,0,4"
                                                Padding="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Matrix 3" />
                                            <TextBox
                                                x:Name="TextBoxIhsMatrix3"
                                                Grid.Row="2"
                                                Grid.Column="1"
                                                Margin="4,2,0,4"
                                                VerticalAlignment="Center"
                                                IsEnabled="False"
                                                IsReadOnly="True"
                                                Text="{Binding IncidIhsMatrix3Text, Mode=OneWay}"
                                                ToolTipService.ShowOnDisabled="True" />

                                        </Grid>
                                    </GroupBox>

                                    <!--  GroupBoxIhsFormation  -->
                                    <GroupBox
                                        x:Name="GroupBoxIhsFormation"
                                        Grid.Row="2"
                                        Grid.Column="0"
                                        Header="{Binding IhsFormationHeader}"
                                        IsEnabled="{Binding TabIhsControlsEnabled}">
                                        <Grid x:Name="GridIhsFormation" Margin="0,2,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition MinWidth="70" />
                                                <ColumnDefinition Width="378*" />
                                            </Grid.ColumnDefinitions>

                                            <Label
                                                x:Name="LabelIhsFormation1"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="0,2,0,4"
                                                Padding="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Formation 1" />
                                            <TextBox
                                                x:Name="TextBoxIhsFormation1"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Margin="4,2,0,4"
                                                VerticalAlignment="Center"
                                                IsEnabled="False"
                                                IsReadOnly="True"
                                                Text="{Binding IncidIhsFormation1Text, Mode=OneWay}"
                                                ToolTipService.ShowOnDisabled="True" />

                                            <Label
                                                x:Name="LabelIhsFormation2"
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                Margin="0,2,0,4"
                                                Padding="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Formation 2" />
                                            <TextBox
                                                x:Name="TextBoxIhsFormation2"
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                Margin="4,2,0,4"
                                                VerticalAlignment="Center"
                                                IsEnabled="False"
                                                IsReadOnly="True"
                                                Text="{Binding IncidIhsFormation2Text, Mode=OneWay}"
                                                ToolTipService.ShowOnDisabled="True" />

                                        </Grid>
                                    </GroupBox>

                                    <!--  GroupBoxIhsManagement  -->
                                    <GroupBox
                                        x:Name="GroupBoxIhsManagement"
                                        Grid.Row="3"
                                        Grid.Column="0"
                                        Header="{Binding IhsManagementHeader}"
                                        IsEnabled="{Binding TabIhsControlsEnabled}">
                                        <Grid x:Name="GridIhsManagement" Margin="0,2,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition MinWidth="70" />
                                                <ColumnDefinition Width="378*" />
                                            </Grid.ColumnDefinitions>

                                            <Label
                                                x:Name="LabelIhsManagement1"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="0,2,0,4"
                                                Padding="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Mgmt 1" />
                                            <TextBox
                                                x:Name="TextBoxIhsManagement1"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Margin="4,2,0,4"
                                                VerticalAlignment="Center"
                                                IsEnabled="False"
                                                IsReadOnly="True"
                                                Text="{Binding IncidIhsManagement1Text, Mode=OneWay}"
                                                ToolTipService.ShowOnDisabled="True" />

                                            <Label
                                                x:Name="LabelIhsManagement2"
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                Margin="0,2,0,4"
                                                Padding="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Mgmt 2" />
                                            <TextBox
                                                x:Name="TextBoxIhsManagement2"
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                Margin="4,2,0,4"
                                                VerticalAlignment="Center"
                                                IsEnabled="False"
                                                IsReadOnly="True"
                                                Text="{Binding IncidIhsManagement2Text, Mode=OneWay}"
                                                ToolTipService.ShowOnDisabled="True" />

                                        </Grid>
                                    </GroupBox>

                                    <!--  GroupBoxIhsComplex  -->
                                    <GroupBox
                                        x:Name="GroupBoxIhsComplex"
                                        Grid.Row="4"
                                        Grid.Column="0"
                                        Header="{Binding IhsComplexHeader}"
                                        IsEnabled="{Binding TabIhsControlsEnabled}">
                                        <Grid x:Name="GridIhsComplex" Margin="0,2,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition MinWidth="70" />
                                                <ColumnDefinition Width="378*" />
                                            </Grid.ColumnDefinitions>

                                            <Label
                                                x:Name="LabelIhsComplex1"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="0,2,0,4"
                                                Padding="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Complex 1" />
                                            <TextBox
                                                x:Name="TextBoxIhsComplex1"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Margin="4,2,0,4"
                                                VerticalAlignment="Center"
                                                IsEnabled="False"
                                                IsReadOnly="True"
                                                Text="{Binding IncidIhsComplex1Text, Mode=OneWay}"
                                                ToolTipService.ShowOnDisabled="True" />

                                            <Label
                                                x:Name="LabelIhsComplex2"
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                Margin="0,2,0,4"
                                                Padding="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Complex 2" />
                                            <TextBox
                                                x:Name="TextBoxIhsComplex2"
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                Margin="4,2,0,4"
                                                VerticalAlignment="Center"
                                                IsEnabled="False"
                                                IsReadOnly="True"
                                                Text="{Binding IncidIhsComplex2Text, Mode=OneWay}"
                                                ToolTipService.ShowOnDisabled="True" />

                                        </Grid>
                                    </GroupBox>

                                    <!--  GroupBoxIhsSummary  -->
                                    <GroupBox
                                        x:Name="GroupBoxIhsSummary"
                                        Grid.Row="5"
                                        Grid.Column="0"
                                        Header="{Binding IhsSummaryHeader}"
                                        IsEnabled="{Binding TabIhsControlsEnabled}">
                                        <Grid x:Name="GridSummary" Margin="0,2,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition MinWidth="70" />
                                                <ColumnDefinition Width="378*" />
                                            </Grid.ColumnDefinitions>

                                            <Label
                                                x:Name="LabelIhsSummary"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="0,2,0,4"
                                                Padding="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Summary" />
                                            <TextBox
                                                x:Name="TextBoxIhsSummary"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Margin="4,2,0,4"
                                                VerticalAlignment="Center"
                                                IsEnabled="False"
                                                IsReadOnly="True"
                                                Text="{Binding IncidIhsSummary, Mode=OneWay}" />
                                        </Grid>
                                    </GroupBox>
                                </Grid>
                            </ScrollViewer>
                        </AdornerDecorator>

                    </TabItem>

                    <!--  TabItemPriority  -->
                    <TabItem x:Name="TabItemPriority" IsEnabled="{Binding TabItemPriorityEnabled}">

                        <TabItem.Header>
                            <StackPanel>
                                <Label
                                    x:Name="PriorityTabLabel"
                                    Margin="0,0,0,0"
                                    Padding="0,0,0,0"
                                    VerticalAlignment="Bottom"
                                    Content="{Binding PriorityTabLabel, ValidatesOnDataErrors=True}"
                                    FontSize="12"
                                    FontWeight="Medium"
                                    Tag="{Binding (Validation.Errors).CurrentItem.ErrorContent, Converter={StaticResource errorMessageConverter}, Mode=OneWay, RelativeSource={RelativeSource Self}}"
                                    ToolTipService.ShowOnDisabled="True" />
                            </StackPanel>
                        </TabItem.Header>
                        <AdornerDecorator>
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <Grid x:Name="GridTabItemPriority">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*" MinHeight="150" />
                                        <RowDefinition Height="*" MinHeight="150" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <GroupBox
                                        x:Name="GroupBoxPrimaryBapHabitats"
                                        Grid.Row="0"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="3"
                                        VerticalAlignment="Stretch"
                                        Header="Priority Habitats"
                                        IsEnabled="{Binding TabDetailsControlsEnabled}">
                                        <Grid x:Name="GridBapHabitatsPrimary" Margin="0,4,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition />
                                                <ColumnDefinition Width="22" />
                                            </Grid.ColumnDefinitions>
                                            <DataGrid
                                                x:Name="DataGridPrimaryBapHabitats"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                Margin="0,0,4,0"
                                                Padding="2,0"
                                                AutoGenerateColumns="False"
                                                BorderBrush="Black"
                                                BorderThickness="1"
                                                CanUserAddRows="False"
                                                CanUserDeleteRows="False"
                                                CanUserReorderColumns="False"
                                                CanUserResizeColumns="True"
                                                CanUserSortColumns="True"
                                                HeadersVisibility="Column"
                                                IsEnabled="{Binding BapHabitatsAutoEnabled}"
                                                ItemsSource="{Binding IncidBapHabitatsAuto}"
                                                MinRowHeight="24"
                                                RowDetailsVisibilityMode="Visible"
                                                RowHeaderWidth="20"
                                                RowHeight="24"
                                                Style="{DynamicResource Esri_DataGridRowHeaderless}">

                                                <DataGrid.Resources>
                                                    <Style TargetType="DataGridRow">
                                                        <Setter Property="VerticalAlignment" Value="Center" />
                                                    </Style>
                                                </DataGrid.Resources>

                                                <DataGrid.RowValidationRules>
                                                    <DataErrorValidationRule />
                                                </DataGrid.RowValidationRules>

                                                <DataGrid.Columns>
                                                    <DataGridTextColumn
                                                        Binding="{Binding bap_id}"
                                                        Header="bap_id"
                                                        IsReadOnly="True"
                                                        Visibility="Collapsed" />
                                                    <DataGridTextColumn
                                                        Binding="{Binding incid}"
                                                        Header="INCID"
                                                        IsReadOnly="True"
                                                        Visibility="Collapsed" />
                                                    <DataGridComboBoxColumn
                                                        x:Name="DataGridComboBoxPrimaryBapHabitatCodes"
                                                        Width="SizeToHeader"
                                                        MinWidth="60"
                                                        CanUserResize="True"
                                                        DisplayMemberPath="description"
                                                        Header="Habitat"
                                                        IsReadOnly="True"
                                                        SelectedValueBinding="{Binding bap_habitat, UpdateSourceTrigger=PropertyChanged}"
                                                        SelectedValuePath="code">
                                                        <DataGridComboBoxColumn.EditingElementStyle>
                                                            <Style TargetType="ComboBox">
                                                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                                                <Setter Property="ItemsSource" Value="{Binding DataContext.BapHabitatCodes, RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                                            </Style>
                                                        </DataGridComboBoxColumn.EditingElementStyle>
                                                        <DataGridComboBoxColumn.ElementStyle>
                                                            <Style TargetType="ComboBox">
                                                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                                                <Setter Property="ItemsSource" Value="{Binding DataContext.BapHabitatCodes, RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                                            </Style>
                                                        </DataGridComboBoxColumn.ElementStyle>
                                                    </DataGridComboBoxColumn>

                                                    <DataGridComboBoxColumn
                                                        x:Name="DataGridComboBoxPrimaryBapDeterminationQualityCodesUser"
                                                        Width="SizeToHeader"
                                                        MinWidth="100"
                                                        CanUserResize="True"
                                                        DisplayMemberPath="description"
                                                        Header="Determ. Quality"
                                                        SelectedValueBinding="{Binding quality_determination, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                        SelectedValuePath="code">
                                                        <DataGridComboBoxColumn.EditingElementStyle>
                                                            <Style TargetType="ComboBox">
                                                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                                                <Setter Property="ItemsSource" Value="{Binding DataContext.BapDeterminationQualityCodesAuto, RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                                            </Style>
                                                        </DataGridComboBoxColumn.EditingElementStyle>
                                                        <DataGridComboBoxColumn.ElementStyle>
                                                            <Style TargetType="ComboBox">
                                                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                                                <Setter Property="ItemsSource" Value="{Binding DataContext.BapDeterminationQualityCodesAuto, RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                                            </Style>
                                                        </DataGridComboBoxColumn.ElementStyle>
                                                    </DataGridComboBoxColumn>

                                                    <DataGridComboBoxColumn
                                                        x:Name="DataGridComboBoxPrimaryyBapInterpretationQualityCodes"
                                                        Width="SizeToHeader"
                                                        MinWidth="80"
                                                        CanUserResize="True"
                                                        DisplayMemberPath="description"
                                                        Header="Interp. Quality"
                                                        SelectedValueBinding="{Binding quality_interpretation, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                        SelectedValuePath="code">
                                                        <DataGridComboBoxColumn.EditingElementStyle>
                                                            <Style TargetType="ComboBox">
                                                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                                                <Setter Property="ItemsSource" Value="{Binding DataContext.BapInterpretationQualityCodes, RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                                            </Style>
                                                        </DataGridComboBoxColumn.EditingElementStyle>
                                                        <DataGridComboBoxColumn.ElementStyle>
                                                            <Style TargetType="ComboBox">
                                                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                                                <Setter Property="ItemsSource" Value="{Binding DataContext.BapInterpretationQualityCodes, RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                                            </Style>
                                                        </DataGridComboBoxColumn.ElementStyle>
                                                    </DataGridComboBoxColumn>
                                                    <!--  EditingElementStyle="{DynamicResource ComboBoxStyle}"  -->

                                                    <DataGridTextColumn
                                                        Width="SizeToHeader"
                                                        MinWidth="100"
                                                        Binding="{Binding interpretation_comments, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                        CanUserResize="True"
                                                        Header="Interp. Comments">
                                                        <DataGridTextColumn.ElementStyle>
                                                            <Style TargetType="TextBlock">
                                                                <Setter Property="VerticalAlignment" Value="Center" />
                                                            </Style>
                                                        </DataGridTextColumn.ElementStyle>

                                                        <DataGridTextColumn.EditingElementStyle>
                                                            <Style TargetType="TextBox">
                                                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                                            </Style>
                                                        </DataGridTextColumn.EditingElementStyle>
                                                    </DataGridTextColumn>

                                                    <!--  EditingElementStyle="{DynamicResource TextBoxStyle}"  -->
                                                </DataGrid.Columns>
                                            </DataGrid>

                                            <!--  ButtonEditPriorityHabitats  -->
                                            <Button
                                                x:Name="ButtonEditPriorityHabitats"
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                Width="20"
                                                Height="20"
                                                MinWidth="0"
                                                MinHeight="0"
                                                Margin="0,2,0,0"
                                                Padding="0,0,0,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Command="{Binding EditPriorityHabitatsCommand}"
                                                Style="{DynamicResource Esri_Button}"
                                                ToolTip="Priority Habitats"
                                                ToolTipService.ShowOnDisabled="True">
                                                <Image
                                                    Width="16"
                                                    Height="16"
                                                    Source="{Binding ButtonEditPriorityHabitatsImg}" />
                                            </Button>

                                        </Grid>
                                    </GroupBox>

                                    <GroupBox
                                        x:Name="GroupBoxSecondaryBapHabitats"
                                        Grid.Row="1"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="3"
                                        VerticalAlignment="Stretch"
                                        Header="Potential Priority Habitats"
                                        IsEnabled="{Binding TabDetailsControlsEnabled}">
                                        <Grid x:Name="GridBapHabitatsUser" Margin="0,4,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition />
                                                <ColumnDefinition Width="22" />
                                            </Grid.ColumnDefinitions>
                                            <DataGrid
                                                x:Name="DataGridUserBapHabitats"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                Margin="0,0,4,0"
                                                Padding="2,0"
                                                AutoGenerateColumns="False"
                                                BorderBrush="Black"
                                                BorderThickness="1"
                                                CanUserAddRows="True"
                                                CanUserDeleteRows="True"
                                                CanUserReorderColumns="False"
                                                CanUserResizeColumns="True"
                                                CanUserSortColumns="True"
                                                HeadersVisibility="All"
                                                IsEnabled="{Binding BapHabitatsUserEnabled}"
                                                ItemsSource="{Binding IncidBapHabitatsUser}"
                                                MinRowHeight="24"
                                                RowDetailsVisibilityMode="Visible"
                                                RowHeaderWidth="20"
                                                RowHeight="24"
                                                Style="{DynamicResource Esri_DataGrid}"
                                                VirtualizingStackPanel.IsVirtualizing="False">

                                                <DataGrid.RowStyle>
                                                    <Style BasedOn="{StaticResource Esri_DataGridRow}" TargetType="DataGridRow" />
                                                </DataGrid.RowStyle>

                                                <DataGrid.RowValidationRules>
                                                    <DataErrorValidationRule />
                                                </DataGrid.RowValidationRules>

                                                <DataGrid.Columns>
                                                    <DataGridTextColumn
                                                        Binding="{Binding bap_id}"
                                                        Header="bap_id"
                                                        IsReadOnly="True"
                                                        Visibility="Collapsed" />
                                                    <DataGridTextColumn
                                                        Binding="{Binding incid}"
                                                        Header="INCID"
                                                        IsReadOnly="True"
                                                        Visibility="Collapsed" />
                                                    <DataGridComboBoxColumn
                                                        x:Name="DataGridComboBoxSecondaryBapHabitatCodes"
                                                        Width="SizeToHeader"
                                                        MinWidth="60"
                                                        CanUserResize="True"
                                                        DisplayMemberPath="description"
                                                        Header="Habitat"
                                                        IsReadOnly="False"
                                                        SelectedValueBinding="{Binding bap_habitat, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                        SelectedValuePath="code">
                                                        <DataGridComboBoxColumn.EditingElementStyle>
                                                            <Style TargetType="ComboBox">
                                                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                                                <Setter Property="ItemsSource" Value="{Binding DataContext.BapHabitatCodes, RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                                            </Style>
                                                        </DataGridComboBoxColumn.EditingElementStyle>
                                                        <DataGridComboBoxColumn.ElementStyle>
                                                            <Style TargetType="ComboBox">
                                                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                                                <Setter Property="ItemsSource" Value="{Binding DataContext.BapHabitatCodes, RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                                            </Style>
                                                        </DataGridComboBoxColumn.ElementStyle>
                                                    </DataGridComboBoxColumn>
                                                    <!--  EditingElementStyle="{DynamicResource ComboBoxStyle}"  -->
                                                    <DataGridComboBoxColumn
                                                        x:Name="DataGridComboBoxSecondaryBapDeterminationQualityCodesUser"
                                                        Width="SizeToHeader"
                                                        MinWidth="100"
                                                        CanUserResize="True"
                                                        DisplayMemberPath="description"
                                                        Header="Determ. Quality"
                                                        SelectedValueBinding="{Binding quality_determination, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                        SelectedValuePath="code">
                                                        <DataGridComboBoxColumn.EditingElementStyle>
                                                            <Style TargetType="ComboBox">
                                                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                                                <Setter Property="ItemsSource" Value="{Binding DataContext.BapDeterminationQualityCodesUser, RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                                            </Style>
                                                        </DataGridComboBoxColumn.EditingElementStyle>
                                                        <DataGridComboBoxColumn.ElementStyle>
                                                            <Style TargetType="ComboBox">
                                                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                                                <Setter Property="ItemsSource" Value="{Binding DataContext.BapDeterminationQualityCodesUser, RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                                            </Style>
                                                        </DataGridComboBoxColumn.ElementStyle>
                                                    </DataGridComboBoxColumn>
                                                    <!--  EditingElementStyle="{DynamicResource ComboBoxStyle}"  -->
                                                    <DataGridComboBoxColumn
                                                        x:Name="DataGridComboBoxSecondaryBapInterpretationQualityCodes"
                                                        Width="SizeToHeader"
                                                        MinWidth="80"
                                                        CanUserResize="True"
                                                        DisplayMemberPath="description"
                                                        Header="Interp. Quality"
                                                        SelectedValueBinding="{Binding quality_interpretation, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                        SelectedValuePath="code">
                                                        <DataGridComboBoxColumn.EditingElementStyle>
                                                            <Style TargetType="ComboBox">
                                                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                                                <Setter Property="ItemsSource" Value="{Binding DataContext.BapInterpretationQualityCodes, RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                                            </Style>
                                                        </DataGridComboBoxColumn.EditingElementStyle>
                                                        <DataGridComboBoxColumn.ElementStyle>
                                                            <Style TargetType="ComboBox">
                                                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                                                <Setter Property="ItemsSource" Value="{Binding DataContext.BapInterpretationQualityCodes, RelativeSource={RelativeSource AncestorType=DataGrid}}" />
                                                            </Style>
                                                        </DataGridComboBoxColumn.ElementStyle>
                                                    </DataGridComboBoxColumn>
                                                    <!--  EditingElementStyle="{DynamicResource ComboBoxStyle}"  -->
                                                    <DataGridTextColumn
                                                        Width="*"
                                                        MinWidth="100"
                                                        Binding="{Binding interpretation_comments, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                        CanUserResize="True"
                                                        Header="Interp. Comments">
                                                        <DataGridTextColumn.ElementStyle>
                                                            <Style TargetType="TextBlock">
                                                                <Setter Property="VerticalAlignment" Value="Center" />
                                                            </Style>
                                                        </DataGridTextColumn.ElementStyle>

                                                        <DataGridTextColumn.EditingElementStyle>
                                                            <Style TargetType="TextBox">
                                                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                                            </Style>
                                                        </DataGridTextColumn.EditingElementStyle>
                                                    </DataGridTextColumn>
                                                    <!--  EditingElementStyle="{DynamicResource TextBoxStyle}"  -->
                                                </DataGrid.Columns>
                                            </DataGrid>

                                            <!--  ButtonEditPriorityHabitats  -->
                                            <Button
                                                x:Name="ButtonEditPotentialHabitats"
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                Width="20"
                                                Height="20"
                                                MinWidth="0"
                                                MinHeight="0"
                                                Margin="0,2,0,0"
                                                Padding="0,0,0,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Command="{Binding EditPotentialHabitatsCommand}"
                                                Style="{DynamicResource Esri_Button}"
                                                ToolTip="Potential Priority Habitats"
                                                ToolTipService.ShowOnDisabled="True">
                                                <Image
                                                    Width="16"
                                                    Height="16"
                                                    Source="{Binding ButtonEditPotentialHabitatsImg}" />
                                            </Button>

                                            <CheckBox
                                                x:Name="CheckBoxCopyBapHabitatUser"
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                Margin="0,0,0,4"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidBapHabitatsUser, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                IsEnabled="{Binding BapHabitatsUserEnabled}" />
                                        </Grid>
                                    </GroupBox>

                                </Grid>
                            </ScrollViewer>
                        </AdornerDecorator>
                    </TabItem>

                    <!--  TabItemDetails  -->
                    <TabItem x:Name="TabItemDetails" IsEnabled="{Binding TabItemDetailsEnabled}">

                        <TabItem.Header>
                            <StackPanel>
                                <Label
                                    x:Name="DetailsTabLabel"
                                    Margin="0,0,0,0"
                                    Padding="0,0,0,0"
                                    VerticalAlignment="Bottom"
                                    Content="{Binding DetailsTabLabel, ValidatesOnDataErrors=True}"
                                    FontSize="12"
                                    FontWeight="Medium"
                                    Tag="{Binding (Validation.Errors).CurrentItem.ErrorContent, Converter={StaticResource errorMessageConverter}, Mode=OneWay, RelativeSource={RelativeSource Self}}"
                                    ToolTipService.ShowOnDisabled="True" />
                            </StackPanel>
                        </TabItem.Header>
                        <AdornerDecorator>
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <Grid x:Name="GridTabItemDetails">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="2*" />
                                        <RowDefinition Height="1*" />
                                        <RowDefinition Height="1.5*" />
                                        <RowDefinition Height="1.5*" />
                                        <RowDefinition Height="3*" />
                                    </Grid.RowDefinitions>

                                    <!--  GroupBoxGeneralComments  -->
                                    <GroupBox
                                        x:Name="GroupBoxGeneralComments"
                                        Grid.Row="0"
                                        VerticalAlignment="Stretch"
                                        Header="{Binding DetailsCommentsHeader}"
                                        IsEnabled="{Binding TabDetailsControlsEnabled}">
                                        <Grid x:Name="GridGeneralComments" Margin="0,4,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" MinWidth="70" />
                                                <ColumnDefinition />
                                                <ColumnDefinition Width="20" />
                                            </Grid.ColumnDefinitions>

                                            <Label
                                                x:Name="LabelGeneralComments"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="General&#xa;Comments" />
                                            <TextBox
                                                x:Name="TextBoxIncidGeneralComments"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                MinHeight="52"
                                                BorderThickness="1"
                                                MaxLength="254"
                                                Tag="ErrorContent"
                                                Text="{Binding IncidGeneralComments, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                TextWrapping="Wrap"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopyGeneralComments"
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidGeneralComments, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        </Grid>
                                    </GroupBox>

                                    <!--  GroupBoxMaps  -->
                                    <GroupBox
                                        x:Name="GroupBoxMaps"
                                        Grid.Row="1"
                                        Header="{Binding DetailsMapsHeader}"
                                        IsEnabled="{Binding TabDetailsControlsEnabled}">
                                        <Grid x:Name="GridMaps" Margin="0,4,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" MinWidth="70" />
                                                <ColumnDefinition Width="*" MinWidth="100" />
                                                <ColumnDefinition Width="20" />
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" MinWidth="100" />
                                                <ColumnDefinition Width="20" />
                                            </Grid.ColumnDefinitions>

                                            <Label
                                                x:Name="LabelBoundaryBaseMap"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Boundary" />
                                            <ComboBox
                                                x:Name="ComboBoxIncidBoundaryBaseMap"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                VerticalAlignment="Center"
                                                DisplayMemberPath="description"
                                                IsEditable="False"
                                                IsReadOnly="False"
                                                ItemsSource="{Binding BoundaryMapCodes}"
                                                SelectedValue="{Binding IncidBoundaryBaseMap, ValidatesOnDataErrors=True}"
                                                SelectedValuePath="code"
                                                Tag="ErrorContent"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopyBoundaryBaseMap"
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidBoundaryBaseMap, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                            <Label
                                                x:Name="LabelDigitisationBaseMap"
                                                Grid.Row="0"
                                                Grid.Column="3"
                                                Margin="6,0,0,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Digitisation" />
                                            <ComboBox
                                                x:Name="ComboBoxIncidDigitisationBaseMap"
                                                Grid.Row="0"
                                                Grid.Column="4"
                                                VerticalAlignment="Center"
                                                DisplayMemberPath="description"
                                                IsEditable="False"
                                                IsReadOnly="False"
                                                ItemsSource="{Binding BoundaryMapCodes}"
                                                SelectedValue="{Binding IncidDigitisationBaseMap, ValidatesOnDataErrors=True}"
                                                SelectedValuePath="code"
                                                Tag="ErrorContent"
                                                ToolTipService.ShowOnDisabled="True" />

                                            <CheckBox
                                                x:Name="CheckBoxCopyDigitisationBaseMap"
                                                Grid.Row="0"
                                                Grid.Column="5"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidDigitisationBaseMap, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        </Grid>
                                    </GroupBox>

                                    <!--  GroupBoxSite  -->
                                    <GroupBox
                                        x:Name="GroupBoxSite"
                                        Grid.Row="2"
                                        Header="{Binding DetailsSiteHeader}"
                                        IsEnabled="{Binding TabDetailsControlsEnabled}">
                                        <Grid x:Name="GridSite" Margin="0,4,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" MinWidth="70" />
                                                <ColumnDefinition Width="Auto" MinWidth="100" />
                                                <ColumnDefinition Width="20" />
                                                <ColumnDefinition Width="*" MinWidth="100" />
                                                <ColumnDefinition Width="20" />
                                            </Grid.ColumnDefinitions>

                                            <Label
                                                x:Name="LabelSiteRef"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Site Ref" />
                                            <TextBox
                                                x:Name="TextBoxSiteRef"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Width="180"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                BorderThickness="1"
                                                MaxLength="16"
                                                Tag="ErrorContent"
                                                Text="{Binding IncidSiteRef, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopyIncidSiteRef"
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidSiteRef, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <Label
                                                x:Name="LabelSiteName"
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Site Name" />
                                            <TextBox
                                                x:Name="TextBoxSiteName"
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                Grid.ColumnSpan="3"
                                                VerticalAlignment="Center"
                                                BorderThickness="1"
                                                MaxLength="100"
                                                Tag="ErrorContent"
                                                Text="{Binding IncidSiteName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                TextWrapping="Wrap"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopyIncidSiteName"
                                                Grid.Row="1"
                                                Grid.Column="4"
                                                Margin="0,2,0,2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidSiteName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        </Grid>
                                    </GroupBox>

                                    <!--  GroupBoxCondition  -->
                                    <GroupBox
                                        x:Name="GroupBoxCondition"
                                        Grid.Row="3"
                                        Header="{Binding DetailsConditionHeader}"
                                        IsEnabled="{Binding TabDetailsControlsEnabled}">
                                        <Grid x:Name="GridCondition" Margin="0,4,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" MinWidth="70" />
                                                <ColumnDefinition Width="*" MinWidth="100" />
                                                <ColumnDefinition Width="20" />
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="2*" MinWidth="100" />
                                                <ColumnDefinition Width="20" />
                                            </Grid.ColumnDefinitions>

                                            <Label
                                                x:Name="LabelCondition"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Condition" />
                                            <ComboBox
                                                x:Name="ComboBoxIncidCondition"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                VerticalAlignment="Center"
                                                DisplayMemberPath="description"
                                                IsEditable="False"
                                                IsReadOnly="False"
                                                ItemsSource="{Binding ConditionCodes}"
                                                SelectedValue="{Binding IncidCondition, ValidatesOnDataErrors=True}"
                                                SelectedValuePath="code"
                                                Tag="ErrorContent"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopyCondition"
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidCondition, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <Label
                                                x:Name="LabelConditionQualifier"
                                                Grid.Row="0"
                                                Grid.Column="3"
                                                Margin="6,0,0,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Qualifier" />
                                            <ComboBox
                                                x:Name="ComboBoxIncidConditionQualifier"
                                                Grid.Row="0"
                                                Grid.Column="4"
                                                VerticalAlignment="Center"
                                                DisplayMemberPath="description"
                                                IsEditable="False"
                                                IsEnabled="{Binding IncidConditionEnabled, Mode=OneWay}"
                                                IsReadOnly="False"
                                                ItemsSource="{Binding ConditionQualifierCodes}"
                                                SelectedValue="{Binding IncidConditionQualifier, ValidatesOnDataErrors=True}"
                                                SelectedValuePath="code"
                                                Tag="ErrorContent"
                                                ToolTipService.ShowOnDisabled="True" />

                                            <CheckBox
                                                x:Name="CheckBoxCopyConditionQualifier"
                                                Grid.Row="0"
                                                Grid.Column="5"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidConditionQualifier, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <Label
                                                x:Name="LabelConditionDate"
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Date" />
                                            <TextBox
                                                x:Name="TextBoxConditionDate"
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                Grid.ColumnSpan="4"
                                                Height="22"
                                                VerticalAlignment="Center"
                                                BorderThickness="1"
                                                IsEnabled="{Binding IncidConditionEnabled, Mode=OneWay}"
                                                Tag="ErrorContent"
                                                Text="{Binding IncidConditionDate, ConverterParameter=source_date_start^source_date_end^source_date_type, Converter={StaticResource vagueDateConverter}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopyConditionDate"
                                                Grid.Row="1"
                                                Grid.Column="5"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidConditionDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                        </Grid>
                                    </GroupBox>

                                    <!--  GroupBoxQuality  -->
                                    <GroupBox
                                        x:Name="GroupBoxQuality"
                                        Grid.Row="4"
                                        Header="{Binding DetailsQualityHeader}"
                                        IsEnabled="{Binding TabDetailsControlsEnabled}">
                                        <Grid x:Name="GridQuality" Margin="0,4,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" MinWidth="70" />
                                                <ColumnDefinition Width="*" MinWidth="100" />
                                                <ColumnDefinition Width="2.5*" />
                                                <ColumnDefinition Width="20" />
                                            </Grid.ColumnDefinitions>

                                            <Label
                                                x:Name="LabelQualityDetermination"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Determin." />
                                            <ComboBox
                                                x:Name="ComboBoxIncidQualityDetermination"
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Grid.ColumnSpan="2"
                                                VerticalAlignment="Center"
                                                DisplayMemberPath="description"
                                                IsEditable="False"
                                                IsReadOnly="False"
                                                ItemsSource="{Binding QualityDeterminationCodes}"
                                                SelectedValue="{Binding IncidQualityDetermination, ValidatesOnDataErrors=True}"
                                                SelectedValuePath="code"
                                                Tag="ErrorContent"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopyQualityDetermination"
                                                Grid.Row="0"
                                                Grid.Column="3"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidQualityDetermination, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <Label
                                                x:Name="LabelQualityInterpretation"
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Interpret." />
                                            <ComboBox
                                                x:Name="ComboBoxIncidQualityInterpretation"
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                VerticalAlignment="Center"
                                                DisplayMemberPath="description"
                                                IsEditable="False"
                                                IsReadOnly="False"
                                                ItemsSource="{Binding QualityInterpretationCodes}"
                                                SelectedValue="{Binding IncidQualityInterpretation, ValidatesOnDataErrors=True}"
                                                SelectedValuePath="code"
                                                Tag="ErrorContent"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopyQualityInterpretation"
                                                Grid.Row="1"
                                                Grid.Column="3"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidQualityInterpretation, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <Label
                                                x:Name="LabelQualityComments"
                                                Grid.Row="2"
                                                Grid.Column="0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Interpret.&#xa;Comments" />
                                            <TextBox
                                                x:Name="TextBoxQualityComments"
                                                Grid.Row="2"
                                                Grid.Column="1"
                                                Grid.ColumnSpan="2"
                                                MinHeight="52"
                                                BorderThickness="1"
                                                MaxLength="254"
                                                Tag="ErrorContent"
                                                Text="{Binding IncidQualityComments, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                TextWrapping="Wrap"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopyQualityComments"
                                                Grid.Row="2"
                                                Grid.Column="3"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidQualityComments, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                        </Grid>
                                    </GroupBox>

                                </Grid>
                            </ScrollViewer>
                        </AdornerDecorator>
                    </TabItem>

                    <!--  TabItemSources  -->
                    <TabItem x:Name="TabItemSources" IsEnabled="{Binding TabItemSourcesEnabled}">
                        <TabItem.Header>
                            <StackPanel>
                                <Label
                                    x:Name="SourcesTabLabel"
                                    Margin="0,0,0,0"
                                    Padding="0,0,0,0"
                                    VerticalAlignment="Bottom"
                                    Content="{Binding SourcesTabLabel, ValidatesOnDataErrors=True}"
                                    FontSize="12"
                                    FontWeight="Medium"
                                    Tag="{Binding (Validation.Errors).CurrentItem.ErrorContent, Converter={StaticResource errorMessageConverter}, Mode=OneWay, RelativeSource={RelativeSource Self}}"
                                    ToolTipService.ShowOnDisabled="True" />
                            </StackPanel>
                        </TabItem.Header>
                        <AdornerDecorator>
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <Grid x:Name="GridTabItemSources">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*" MinHeight="150" />
                                        <RowDefinition Height="*" MinHeight="150" />
                                        <RowDefinition Height="*" MinHeight="150" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80*" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>

                                    <GroupBox
                                        x:Name="GroupBoxSource1"
                                        Grid.Row="0"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="3"
                                        Header="{Binding Source1Header}"
                                        IsEnabled="{Binding TabSourcesControlsEnabled}">
                                        <Grid x:Name="GridSource1" Margin="0,0,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="50" />
                                                <ColumnDefinition Width="40" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="20" />
                                            </Grid.ColumnDefinitions>

                                            <TextBox
                                                x:Name="LabelIncidSource1Number"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                FontWeight="Bold"
                                                IsEnabled="False"
                                                IsReadOnly="True"
                                                Text="#1"
                                                Visibility="{Binding ShowSourceNumbers}" />
                                            <Label
                                                x:Name="LabelIncidSource1Name"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Name" />
                                            <ComboBox
                                                x:Name="ComboBoxIncidSource1Name"
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                VerticalAlignment="Center"
                                                DisplayMemberPath="source_name"
                                                IsEditable="True"
                                                IsReadOnly="False"
                                                IsTextSearchEnabled="True"
                                                ItemsSource="{Binding Source1Names}"
                                                SelectedValue="{Binding IncidSource1Id, ValidatesOnDataErrors=True}"
                                                SelectedValuePath="source_id"
                                                Tag="ErrorContent"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopyIncidSource1Name"
                                                Grid.Row="0"
                                                Grid.Column="3"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidSource1Id, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <Label
                                                x:Name="LabelIncidSource1Date"
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Vague Date" />
                                            <TextBox
                                                x:Name="TextBoxIncidSource1Date"
                                                Grid.Row="1"
                                                Grid.Column="2"
                                                VerticalAlignment="Center"
                                                BorderThickness="1"
                                                IsEnabled="{Binding IncidSource1Enabled, Mode=OneWay}"
                                                Tag="ErrorContent"
                                                Text="{Binding IncidSource1Date, ConverterParameter=source_date_start^source_date_end^source_date_type, Converter={StaticResource vagueDateConverter}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopySource1Date"
                                                Grid.Row="1"
                                                Grid.Column="3"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidSource1Date, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <Label
                                                x:Name="LabelIncidSource1HabitatClass"
                                                Grid.Row="2"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Habitat Class" />
                                            <ComboBox
                                                x:Name="ComboBoxIncidSource1HabitatClass"
                                                Grid.Row="2"
                                                Grid.Column="2"
                                                VerticalAlignment="Center"
                                                DisplayMemberPath="description"
                                                IsEditable="True"
                                                IsEnabled="{Binding IncidSource1Enabled, Mode=OneWay}"
                                                IsReadOnly="False"
                                                IsTextSearchEnabled="True"
                                                ItemsSource="{Binding SourceHabitatClassCodes}"
                                                SelectedValue="{Binding IncidSource1HabitatClass, ValidatesOnDataErrors=True}"
                                                SelectedValuePath="code"
                                                Tag="ErrorContent"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopySource1HabitatClass"
                                                Grid.Row="2"
                                                Grid.Column="3"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidSource1HabitatClass, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <Label
                                                x:Name="LabelIncidSource1HabitatType"
                                                Grid.Row="3"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Habitat Type" />

                                            <ComboBox
                                                x:Name="ComboBoxIncidSource1HabitatType"
                                                Grid.Row="3"
                                                Grid.Column="2"
                                                VerticalAlignment="Center"
                                                DisplayMemberPath="description"
                                                IsEditable="True"
                                                IsEnabled="{Binding IncidSource1Enabled, Mode=OneWay}"
                                                IsReadOnly="False"
                                                IsTextSearchEnabled="True"
                                                ItemsSource="{Binding Source1HabitatTypeCodes, ConverterParameter=code^name^description^sort_order, Converter={StaticResource codeNameDescriptionConverter}}"
                                                SelectedValue="{Binding IncidSource1HabitatType, ValidatesOnDataErrors=True}"
                                                SelectedValuePath="code"
                                                Tag="ErrorContent"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopyIncidSource1HabitatType"
                                                Grid.Row="3"
                                                Grid.Column="3"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidSource1HabitatType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <Label
                                                x:Name="LabelIncidSource1BoundaryImportance"
                                                Grid.Row="4"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Boundary Imp." />
                                            <Grid
                                                x:Name="GridSource1Importance"
                                                Grid.Row="4"
                                                Grid.Column="2">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition />
                                                    <ColumnDefinition Width="20" />
                                                    <ColumnDefinition Width="10" />
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition />
                                                </Grid.ColumnDefinitions>

                                                <ComboBox
                                                    x:Name="ComboBoxIncidSource1BoundaryImportance"
                                                    Grid.Row="0"
                                                    Grid.Column="0"
                                                    VerticalAlignment="Center"
                                                    DisplayMemberPath="description"
                                                    IsEditable="True"
                                                    IsEnabled="{Binding IncidSource1Enabled, Mode=OneWay}"
                                                    IsReadOnly="False"
                                                    IsTextSearchEnabled="True"
                                                    ItemsSource="{Binding SourceImportanceCodes}"
                                                    SelectedValue="{Binding IncidSource1BoundaryImportance, ValidatesOnDataErrors=True}"
                                                    SelectedValuePath="code"
                                                    Tag="ErrorContent"
                                                    ToolTipService.ShowOnDisabled="True" />
                                                <CheckBox
                                                    x:Name="CheckBoxCopySource1BoundaryImportance"
                                                    Grid.Row="0"
                                                    Grid.Column="1"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Center"
                                                    IsChecked="{Binding CopySwitches.CopyIncidSource1BoundaryImportance, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                <Label
                                                    x:Name="LabelIncidSource1HabitatImportance"
                                                    Grid.Row="0"
                                                    Grid.Column="3"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Center"
                                                    Content="Habitat Imp." />
                                                <ComboBox
                                                    x:Name="ComboBoxIncidSource1HabitatImportance"
                                                    Grid.Row="3"
                                                    Grid.Column="4"
                                                    VerticalAlignment="Center"
                                                    DisplayMemberPath="description"
                                                    IsEditable="True"
                                                    IsEnabled="{Binding IncidSource1Enabled, Mode=OneWay}"
                                                    IsReadOnly="False"
                                                    IsTextSearchEnabled="True"
                                                    ItemsSource="{Binding SourceImportanceCodes}"
                                                    SelectedValue="{Binding IncidSource1HabitatImportance, ValidatesOnDataErrors=True}"
                                                    SelectedValuePath="code"
                                                    Tag="ErrorContent"
                                                    ToolTipService.ShowOnDisabled="True" />
                                            </Grid>
                                            <CheckBox
                                                x:Name="CheckBoxCopySource1HabitatImportance"
                                                Grid.Row="4"
                                                Grid.Column="3"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidSource1HabitatImportance, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        </Grid>
                                    </GroupBox>

                                    <GroupBox
                                        x:Name="GroupBoxSource2"
                                        Grid.Row="1"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="3"
                                        Header="{Binding Source2Header}"
                                        IsEnabled="{Binding TabSourcesControlsEnabled}">
                                        <Grid x:Name="GridSource2" Margin="0,0,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="50" />
                                                <ColumnDefinition Width="40" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="20" />
                                            </Grid.ColumnDefinitions>

                                            <TextBox
                                                x:Name="LabelIncidSource2Number"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                FontWeight="Bold"
                                                IsEnabled="False"
                                                IsReadOnly="True"
                                                Text="#2"
                                                Visibility="{Binding ShowSourceNumbers}" />
                                            <Label
                                                x:Name="LabelIncidSource2Name"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Name" />
                                            <ComboBox
                                                x:Name="ComboBoxIncidSource2Name"
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                VerticalAlignment="Center"
                                                DisplayMemberPath="source_name"
                                                IsEditable="True"
                                                IsReadOnly="False"
                                                IsTextSearchEnabled="True"
                                                ItemsSource="{Binding Source2Names}"
                                                SelectedValue="{Binding IncidSource2Id, ValidatesOnDataErrors=True}"
                                                SelectedValuePath="source_id"
                                                Tag="ErrorContent"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopyIncidSource2Name"
                                                Grid.Row="0"
                                                Grid.Column="3"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidSource2Id, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <Label
                                                x:Name="LabelIncidSource2Date"
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Vague Date" />
                                            <TextBox
                                                x:Name="TextBoxIncidSource2Date"
                                                Grid.Row="1"
                                                Grid.Column="2"
                                                VerticalAlignment="Center"
                                                BorderThickness="1"
                                                IsEnabled="{Binding IncidSource2Enabled, Mode=OneWay}"
                                                Tag="ErrorContent"
                                                Text="{Binding IncidSource2Date, ConverterParameter=source_date_start^source_date_end^source_date_type, Converter={StaticResource vagueDateConverter}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopySource2Date"
                                                Grid.Row="1"
                                                Grid.Column="3"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidSource2Date, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <Label
                                                x:Name="LabelIncidSource2HabitatClass"
                                                Grid.Row="2"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Habitat Class" />
                                            <ComboBox
                                                x:Name="ComboBoxIncidSource2HabitatClass"
                                                Grid.Row="2"
                                                Grid.Column="2"
                                                VerticalAlignment="Center"
                                                DisplayMemberPath="description"
                                                IsEditable="True"
                                                IsEnabled="{Binding IncidSource2Enabled, Mode=OneWay}"
                                                IsReadOnly="False"
                                                IsTextSearchEnabled="True"
                                                ItemsSource="{Binding SourceHabitatClassCodes}"
                                                SelectedValue="{Binding IncidSource2HabitatClass, ValidatesOnDataErrors=True}"
                                                SelectedValuePath="code"
                                                Tag="ErrorContent"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopySource2HabitatClass"
                                                Grid.Row="2"
                                                Grid.Column="3"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidSource2HabitatClass, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <Label
                                                x:Name="LabelIncidSource2HabitatType"
                                                Grid.Row="3"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Habitat Type" />

                                            <ComboBox
                                                x:Name="ComboBoxIncidSource2HabitatType"
                                                Grid.Row="3"
                                                Grid.Column="2"
                                                VerticalAlignment="Center"
                                                DisplayMemberPath="description"
                                                IsEditable="True"
                                                IsEnabled="{Binding IncidSource2Enabled, Mode=OneWay}"
                                                IsReadOnly="False"
                                                IsTextSearchEnabled="True"
                                                ItemsSource="{Binding Source2HabitatTypeCodes, ConverterParameter=code^name^description^sort_order, Converter={StaticResource codeNameDescriptionConverter}}"
                                                SelectedValue="{Binding IncidSource2HabitatType, ValidatesOnDataErrors=True}"
                                                SelectedValuePath="code"
                                                Tag="ErrorContent"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopyIncidSource2HabitatType"
                                                Grid.Row="3"
                                                Grid.Column="3"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidSource2HabitatType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <Label
                                                x:Name="LabelIncidSource2BoundaryImportance"
                                                Grid.Row="4"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Boundary Imp." />
                                            <Grid
                                                x:Name="GridSource2Importance"
                                                Grid.Row="4"
                                                Grid.Column="2">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition />
                                                    <ColumnDefinition Width="20" />
                                                    <ColumnDefinition Width="10" />
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition />
                                                </Grid.ColumnDefinitions>

                                                <ComboBox
                                                    x:Name="ComboBoxIncidSource2BoundaryImportance"
                                                    Grid.Row="0"
                                                    Grid.Column="0"
                                                    VerticalAlignment="Center"
                                                    DisplayMemberPath="description"
                                                    IsEditable="True"
                                                    IsEnabled="{Binding IncidSource2Enabled, Mode=OneWay}"
                                                    IsReadOnly="False"
                                                    IsTextSearchEnabled="True"
                                                    ItemsSource="{Binding SourceImportanceCodes}"
                                                    SelectedValue="{Binding IncidSource2BoundaryImportance, ValidatesOnDataErrors=True}"
                                                    SelectedValuePath="code"
                                                    Tag="ErrorContent"
                                                    ToolTipService.ShowOnDisabled="True" />
                                                <CheckBox
                                                    x:Name="CheckBoxCopySource2BoundaryImportance"
                                                    Grid.Row="0"
                                                    Grid.Column="1"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Center"
                                                    IsChecked="{Binding CopySwitches.CopyIncidSource2BoundaryImportance, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                <Label
                                                    x:Name="LabelIncidSource2HabitatImportance"
                                                    Grid.Row="0"
                                                    Grid.Column="3"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Center"
                                                    Content="Habitat Imp." />
                                                <ComboBox
                                                    x:Name="ComboBoxIncidSource2HabitatImportance"
                                                    Grid.Row="3"
                                                    Grid.Column="4"
                                                    VerticalAlignment="Center"
                                                    DisplayMemberPath="description"
                                                    IsEditable="True"
                                                    IsEnabled="{Binding IncidSource2Enabled, Mode=OneWay}"
                                                    IsReadOnly="False"
                                                    IsTextSearchEnabled="True"
                                                    ItemsSource="{Binding SourceImportanceCodes}"
                                                    SelectedValue="{Binding IncidSource2HabitatImportance, ValidatesOnDataErrors=True}"
                                                    SelectedValuePath="code"
                                                    Tag="ErrorContent"
                                                    ToolTipService.ShowOnDisabled="True" />
                                            </Grid>
                                            <CheckBox
                                                x:Name="CheckBoxCopySource2HabitatImportance"
                                                Grid.Row="4"
                                                Grid.Column="3"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidSource2HabitatImportance, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        </Grid>
                                    </GroupBox>

                                    <GroupBox
                                        x:Name="GroupBoxSource3"
                                        Grid.Row="2"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="3"
                                        Header="{Binding Source3Header}"
                                        IsEnabled="{Binding TabSourcesControlsEnabled}">
                                        <Grid x:Name="GridSource3" Margin="0,0,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="50" />
                                                <ColumnDefinition Width="40" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="20" />
                                            </Grid.ColumnDefinitions>

                                            <TextBox
                                                x:Name="LabelIncidSource3Number"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                FontWeight="Bold"
                                                IsEnabled="False"
                                                IsReadOnly="True"
                                                Text="#3"
                                                Visibility="{Binding ShowSourceNumbers}" />
                                            <Label
                                                x:Name="LabelIncidSource3Name"
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Name" />
                                            <ComboBox
                                                x:Name="ComboBoxIncidSource3Name"
                                                Grid.Row="0"
                                                Grid.Column="2"
                                                VerticalAlignment="Center"
                                                DisplayMemberPath="source_name"
                                                IsEditable="True"
                                                IsReadOnly="False"
                                                IsTextSearchEnabled="True"
                                                ItemsSource="{Binding Source3Names}"
                                                SelectedValue="{Binding IncidSource3Id, ValidatesOnDataErrors=True}"
                                                SelectedValuePath="source_id"
                                                Tag="ErrorContent"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopyIncidSource3Name"
                                                Grid.Row="0"
                                                Grid.Column="3"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidSource3Id, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <Label
                                                x:Name="LabelIncidSource3Date"
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Vague Date" />
                                            <TextBox
                                                x:Name="TextBoxIncidSource3Date"
                                                Grid.Row="1"
                                                Grid.Column="2"
                                                VerticalAlignment="Center"
                                                BorderThickness="1"
                                                IsEnabled="{Binding IncidSource3Enabled, Mode=OneWay}"
                                                Tag="ErrorContent"
                                                Text="{Binding IncidSource3Date, ConverterParameter=source_date_start^source_date_end^source_date_type, Converter={StaticResource vagueDateConverter}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopySource3Date"
                                                Grid.Row="1"
                                                Grid.Column="3"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidSource3Date, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <Label
                                                x:Name="LabelIncidSource3HabitatClass"
                                                Grid.Row="2"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Habitat Class" />
                                            <ComboBox
                                                x:Name="ComboBoxIncidSource3HabitatClass"
                                                Grid.Row="2"
                                                Grid.Column="2"
                                                VerticalAlignment="Center"
                                                DisplayMemberPath="description"
                                                IsEditable="True"
                                                IsEnabled="{Binding IncidSource3Enabled, Mode=OneWay}"
                                                IsReadOnly="False"
                                                IsTextSearchEnabled="True"
                                                ItemsSource="{Binding SourceHabitatClassCodes}"
                                                SelectedValue="{Binding IncidSource3HabitatClass, ValidatesOnDataErrors=True}"
                                                SelectedValuePath="code"
                                                Tag="ErrorContent"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopySource3HabitatClass"
                                                Grid.Row="2"
                                                Grid.Column="3"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidSource3HabitatClass, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <Label
                                                x:Name="LabelIncidSource3HabitatType"
                                                Grid.Row="3"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Habitat Type" />

                                            <ComboBox
                                                x:Name="ComboBoxIncidSource3HabitatType"
                                                Grid.Row="3"
                                                Grid.Column="2"
                                                VerticalAlignment="Center"
                                                DisplayMemberPath="description"
                                                IsEditable="True"
                                                IsEnabled="{Binding IncidSource3Enabled, Mode=OneWay}"
                                                IsReadOnly="False"
                                                IsTextSearchEnabled="True"
                                                ItemsSource="{Binding Source3HabitatTypeCodes, ConverterParameter=code^name^description^sort_order, Converter={StaticResource codeNameDescriptionConverter}}"
                                                SelectedValue="{Binding IncidSource3HabitatType, ValidatesOnDataErrors=True}"
                                                SelectedValuePath="code"
                                                Tag="ErrorContent"
                                                ToolTipService.ShowOnDisabled="True" />
                                            <CheckBox
                                                x:Name="CheckBoxCopyIncidSource3HabitatType"
                                                Grid.Row="3"
                                                Grid.Column="3"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidSource3HabitatType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                            <Label
                                                x:Name="LabelIncidSource3BoundaryImportance"
                                                Grid.Row="4"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Content="Boundary Imp." />
                                            <Grid
                                                x:Name="GridSource3Importance"
                                                Grid.Row="4"
                                                Grid.Column="2">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition />
                                                    <ColumnDefinition Width="20" />
                                                    <ColumnDefinition Width="10" />
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition />
                                                </Grid.ColumnDefinitions>

                                                <ComboBox
                                                    x:Name="ComboBoxIncidSource3BoundaryImportance"
                                                    Grid.Row="0"
                                                    Grid.Column="0"
                                                    VerticalAlignment="Center"
                                                    DisplayMemberPath="description"
                                                    IsEditable="True"
                                                    IsEnabled="{Binding IncidSource3Enabled, Mode=OneWay}"
                                                    IsReadOnly="False"
                                                    IsTextSearchEnabled="True"
                                                    ItemsSource="{Binding SourceImportanceCodes}"
                                                    SelectedValue="{Binding IncidSource3BoundaryImportance, ValidatesOnDataErrors=True}"
                                                    SelectedValuePath="code"
                                                    Tag="ErrorContent"
                                                    ToolTipService.ShowOnDisabled="True" />
                                                <CheckBox
                                                    x:Name="CheckBoxCopySource3BoundaryImportance"
                                                    Grid.Row="0"
                                                    Grid.Column="1"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Center"
                                                    IsChecked="{Binding CopySwitches.CopyIncidSource3BoundaryImportance, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                                <Label
                                                    x:Name="LabelIncidSource3HabitatImportance"
                                                    Grid.Row="0"
                                                    Grid.Column="3"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Center"
                                                    Content="Habitat Imp." />
                                                <ComboBox
                                                    x:Name="ComboBoxIncidSource3HabitatImportance"
                                                    Grid.Row="3"
                                                    Grid.Column="4"
                                                    VerticalAlignment="Center"
                                                    DisplayMemberPath="description"
                                                    IsEditable="True"
                                                    IsEnabled="{Binding IncidSource3Enabled, Mode=OneWay}"
                                                    IsReadOnly="False"
                                                    IsTextSearchEnabled="True"
                                                    ItemsSource="{Binding SourceImportanceCodes}"
                                                    SelectedValue="{Binding IncidSource3HabitatImportance, ValidatesOnDataErrors=True}"
                                                    SelectedValuePath="code"
                                                    Tag="ErrorContent"
                                                    ToolTipService.ShowOnDisabled="True" />
                                            </Grid>
                                            <CheckBox
                                                x:Name="CheckBoxCopySource3HabitatImportance"
                                                Grid.Row="4"
                                                Grid.Column="3"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsChecked="{Binding CopySwitches.CopyIncidSource3HabitatImportance, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        </Grid>
                                    </GroupBox>
                                </Grid>
                            </ScrollViewer>
                        </AdornerDecorator>
                    </TabItem>

                    <!--  TabItemHistory  -->
                    <TabItem x:Name="TabItemHistory" IsEnabled="{Binding TabItemHistoryEnabled}">
                        <TabItem.Header>
                            <StackPanel>
                                <Label
                                    Margin="0,0,0,0"
                                    Padding="0,0,0,0"
                                    VerticalAlignment="Bottom"
                                    Content="History"
                                    FontSize="12"
                                    FontWeight="Medium" />
                            </StackPanel>
                        </TabItem.Header>
                        <AdornerDecorator>
                            <Grid x:Name="GridTabItemHistory">
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <!--
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    -->
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="80" />
                                    <ColumnDefinition />
                                    <ColumnDefinition Width="20" />
                                </Grid.ColumnDefinitions>

                                <GroupBox
                                    x:Name="GroupBoxModificationHistory"
                                    Grid.Row="0"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="3">
                                    <!--  Header="Modification History">  -->
                                    <ScrollViewer Margin="0,0,-4,-4" VerticalScrollBarVisibility="Auto">
                                        <ItemsControl
                                            x:Name="ItemsControlModificationHistory"
                                            Grid.Row="0"
                                            MinHeight="280"
                                            Margin="0,0,0,0"
                                            BorderThickness="2"
                                            ItemsSource="{Binding IncidHistory}">
                                            <!-- <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                                <hlu:UniformGrid2 Orientation="Horizontal" Columns="1" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>-->
                                        </ItemsControl>
                                    </ScrollViewer>
                                </GroupBox>
                            </Grid>
                        </AdornerDecorator>
                    </TabItem>
                </TabControl>

                <!--  ButtonGetMapSelection  -->
                <Button
                    x:Name="ButtonGetMapSelection"
                    Grid.Row="1"
                    Grid.Column="1"
                    Width="20"
                    Height="20"
                    MinWidth="0"
                    MinHeight="0"
                    Margin="0,3,4,0"
                    Padding="0,0,0,0"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Command="{Binding GetMapSelectionCommand}"
                    Style="{DynamicResource Esri_Button}"
                    ToolTip="Get Map Selection"
                    ToolTipService.ShowOnDisabled="True">
                    <Image
                        Width="16"
                        Height="16"
                        Source="{Binding ButtonGetMapSelectionImg}" />
                </Button>

                <!--  GridStatus  -->
                <Grid
                    x:Name="GridStatus"
                    Grid.Row="2"
                    Margin="0,4,0,4"
                    Visibility="{Binding HideInOSMMUpdateMode}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <Grid
                        x:Name="GridBulkUpdate"
                        Grid.Column="0"
                        Height="Auto"
                        VerticalAlignment="Bottom"
                        Visibility="{Binding ShowInBulkUpdateMode}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Label
                            x:Name="LabelBulkUpdate"
                            Margin="0,0,4,0"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Content="Bulk Update Affected:"
                            FontStretch="UltraExpanded"
                            FontWeight="Bold" />
                        <!--  Style="{DynamicResource LabelReverseStyle}" />  -->
                    </Grid>

                    <Grid
                        x:Name="GridNavigation"
                        Grid.Column="0"
                        Height="Auto"
                        VerticalAlignment="Bottom"
                        Visibility="{Binding HideInBulkUpdateMode}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="60" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Label
                            x:Name="LabelNavigation"
                            Grid.Column="0"
                            Margin="0,0,0,0"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Content="INCID:" />
                        <!--  Style="{DynamicResource LabelReverseStyle}" />  -->
                        <Button
                            x:Name="ButtonFirstRecord"
                            Grid.Column="1"
                            Margin="0,0,2,0"
                            Command="{Binding NavigateFirstCommand}"
                            Style="{DynamicResource Esri_ButtonUpSmall}"
                            ToolTip="First record" />
                        <Button
                            Name="ButtonPreviousRecord"
                            Grid.Column="2"
                            Margin="2,0,2,0"
                            Command="{Binding NavigatePreviousCommand}"
                            Style="{DynamicResource Esri_ButtonBackSmall}"
                            ToolTip="Previous record" />
                        <TextBox
                            Name="TextBoxRecordNumber"
                            Grid.Column="3"
                            Margin="2,0,2,0"
                            VerticalAlignment="Center"
                            IsEnabled="{Binding TabControlDataEnabled}"
                            Tag="ErrorContent"
                            Text="{Binding IncidCurrentRowIndex, Mode=TwoWay, UpdateSourceTrigger=Explicit, ValidatesOnDataErrors=True}"
                            TextAlignment="Center">
                            <TextBox.InputBindings>
                                <KeyBinding
                                    Key="Enter"
                                    Command="{Binding NavigateIncidCommand}"
                                    CommandParameter="{Binding ElementName=TextBoxRecordNumber, Path=Text}" />
                            </TextBox.InputBindings>
                        </TextBox>
                        <Button
                            x:Name="ButtonNextRecord"
                            Grid.Column="4"
                            Margin="2,0,2,0"
                            Command="{Binding NavigateNextCommand}"
                            Style="{DynamicResource Esri_ButtonForwardSmall}"
                            ToolTip="Next record" />
                        <Button
                            Name="ButtonLastRecord"
                            Grid.Column="5"
                            Margin="2,0,0,0"
                            Command="{Binding NavigateLastCommand}"
                            Style="{DynamicResource Esri_ButtonDownSmall}"
                            ToolTip="Last record" />
                    </Grid>

                    <Grid
                        x:Name="GridLabelStatusIncid"
                        Grid.Column="1"
                        Height="Auto"
                        VerticalAlignment="Bottom">
                        <Label
                            x:Name="LabelStatusIncid"
                            Grid.Column="0"
                            Margin="0,0,4,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Content="{Binding StatusIncid}" />
                    </Grid>

                    <Grid
                        x:Name="GridCommandButtons"
                        Grid.Column="2"
                        Height="Auto"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Bottom">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="80" />
                            <ColumnDefinition Width="80" />
                        </Grid.ColumnDefinitions>

                        <Button
                            x:Name="ButtonCancelBulkUpdate"
                            Grid.Column="1"
                            MinWidth="0"
                            Margin="0,0,2,0"
                            HorizontalAlignment="Center"
                            Command="{Binding CancelBulkUpdateCommand}"
                            Style="{DynamicResource Esri_Button}"
                            Visibility="{Binding ShowInBulkUpdateMode}">
                            _Cancel
                        </Button>
                        <Button
                            x:Name="ButtonUpdate"
                            Grid.Column="2"
                            MinWidth="0"
                            Margin="2,0,0,0"
                            HorizontalAlignment="Center"
                            Background="Red"
                            Command="{Binding UpdateCommand}"
                            Content="Appl_y"
                            Foreground="White"
                            Style="{DynamicResource Esri_Button}"
                            ToolTip="Apply updates" />
                    </Grid>
                </Grid>

                <!--  GridStatusOSMM  -->
                <Grid
                    x:Name="GridStatusOSMM"
                    Grid.Row="2"
                    Margin="0,4,0,4"
                    Visibility="{Binding ShowInOSMMUpdateMode}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="100" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Grid
                        x:Name="GridOSMMNavigation"
                        Grid.Column="0"
                        Height="Auto"
                        VerticalAlignment="Bottom"
                        Visibility="{Binding HideInBulkUpdateMode}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="40" />
                            <ColumnDefinition Width="60" />
                        </Grid.ColumnDefinitions>
                        <Label
                            x:Name="LabelOSMMNavigation"
                            Grid.Column="0"
                            Margin="0,0,4,0"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Content="INCID:" />
                        <!--  Style="{DynamicResource LabelReverseStyle}" />  -->
                        <TextBox
                            x:Name="TextBoxOSMMRecordNumber"
                            Grid.Column="1"
                            Margin="2,0,0,0"
                            IsReadOnly="True"
                            Text="{Binding OSMMIncidCurrentRowIndex, Mode=OneWay}"
                            TextAlignment="Center" />
                    </Grid>

                    <Grid
                        x:Name="GridOSMMLabelStatusIncid"
                        Grid.Column="1"
                        Height="Auto"
                        VerticalAlignment="Bottom">
                        <Label
                            x:Name="LabelOSMMStatusIncid"
                            Grid.Column="0"
                            Margin="8,0,4,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Content="{Binding StatusIncid}" />
                    </Grid>

                    <Grid
                        x:Name="GridOSMMCommandButtons"
                        Grid.Column="2"
                        Height="Auto"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Bottom">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="70" />
                            <ColumnDefinition Width="70" />
                            <ColumnDefinition Width="70" />
                        </Grid.ColumnDefinitions>
                        <Button
                            x:Name="ButtonOSMMSkip"
                            Grid.Column="0"
                            Margin="2,0,0,0"
                            Background="#FF939393"
                            Command="{Binding OSMMSkipCommand}"
                            Content="_Skip"
                            Foreground="White" />
                        <Button
                            x:Name="ButtonOSMMReject"
                            Grid.Column="1"
                            Margin="2,0,0,0"
                            Background="DarkOrange"
                            Command="{Binding OSMMRejectCommand}"
                            Content="{Binding OSMMRejectText}"
                            Foreground="White"
                            Tag="{Binding OSMMRejectTag, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                            ToolTip="Hold down 'Ctrl' key to reject all remaining records in filter"
                            ToolTipService.ShowOnDisabled="True" />
                        <Button
                            x:Name="ButtonOSMMAccept"
                            Grid.Column="2"
                            Margin="2,0,0,0"
                            Background="DarkGreen"
                            Command="{Binding OSMMAcceptCommand}"
                            Content="{Binding OSMMAcceptText}"
                            Foreground="White"
                            Tag="{Binding OSMMAcceptTag, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                            ToolTip="Hold down 'Ctrl' key to accept all remaining records in filter"
                            ToolTipService.ShowOnDisabled="True" />
                    </Grid>
                </Grid>

                <Grid
                    x:Name="GridActiveLayer"
                    Grid.Row="3"
                    Margin="0,0,0,0"
                    VerticalAlignment="Top"
                    Visibility="Collapsed">
                    <Grid x:Name="GridStatusBar">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <Label
                            x:Name="LabelLayerName"
                            Grid.Column="0"
                            Margin="0,0,0,0"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Content="Active Layer:" />
                        <TextBox
                            x:Name="TextBoxLayerName"
                            Grid.Column="1"
                            Height="22"
                            Margin="0,0,0,0"
                            VerticalAlignment="Center"
                            IsEnabled="False"
                            Text="{Binding ActiveLayerName, Mode=OneWay}" />
                    </Grid>
                </Grid>

                <!-- <Separator Grid.Row="4" /> -->

                <Grid
                    Name="GridProcessStatus"
                    Grid.Row="5"
                    Margin="6,6,6,6"
                    Visibility="Visible">

                    <Grid.RowDefinitions>
                        <RowDefinition Height="22" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="22" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <controls:CircularAnimationControl
                        Grid.Column="0"
                        Width="22"
                        Height="22"
                        Foreground="{DynamicResource Esri_BorderSelectedBrush}"
                        SpeedRatio="0.5"
                        Visibility="{Binding IsProcessing}" />
                    <TextBlock
                        Name="TextBlockProcess"
                        Grid.Column="1"
                        Margin="5,0,0,0"
                        VerticalAlignment="Center"
                        Text="{Binding ProcessStatus}" />
                </Grid>

                <Grid
                    Name="GridProgressAnimation"
                    Grid.Row="6"
                    Margin="6,6,6,6"
                    Visibility="{Binding ProgressAnimating}">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <ProgressBar
                        x:Name="ProgressBar"
                        Grid.Column="0"
                        Height="Auto"
                        Margin="0,0,6,0"
                        HorizontalAlignment="Stretch"
                        Maximum="{Binding Path=MaxProgressValue, Mode=OneWay}"
                        Minimum="0"
                        Value="{Binding Path=ProgressValue, Mode=OneWay}" />
                    <TextBlock
                        Grid.Column="0"
                        Margin="0,0,6,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Text="{Binding ProgressText}" />
                </Grid>
            </Grid>

            <controls:MessageLabel
                Grid.Row="1"
                Height="Auto"
                Margin="0,8,0,0"
                CanClose="False"
                Content="{Binding StatusMessage}"
                MessageType="{Binding MessageLevel}"
                Severity="High"
                ShowHelp="False"
                ToolTip="{Binding StatusMessage}"
                Visibility="{Binding HasMessage}" />


        </Grid>
    </DockPanel>
</UserControl>
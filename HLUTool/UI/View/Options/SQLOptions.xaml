<UserControl x:Class="HLU.UI.View.SQLOptions"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <UserControl.Resources>

        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Dictionary/NullableValueConverterDictionary.xaml" />
                <ResourceDictionary Source="../Dictionary/MultiEqualityConverterDictionary.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>

    </UserControl.Resources>

    <StackPanel Margin="4">

        <Label Content="Set options for SQL"
            HorizontalAlignment="Left"
            FontSize="14"
            FontWeight="Medium" />

        <Expander Header="Filter Options"
            Margin="6,10,0,0"
            IsExpanded="True">

            <Grid
                Margin="12,4,4,2"
                HorizontalAlignment="Left">

                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="4" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="4" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <Grid
                    x:Name="GridSQLSelect"
                    Grid.Row="0">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" MinWidth="60" />
                    </Grid.ColumnDefinitions>

                    <Label Content="Get Values Count"
                        x:Name="LabelMaxGetValues"
                        Grid.Column="0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center" />

                    <TextBox Text="{Binding GetValueRows, Converter={StaticResource nullableValueConverter}, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}"
                        x:Name="TextBoxMaxGetValues"
                        Grid.Column="1"
                        BorderThickness="1"
                        Tag="ErrorContent"
                        TextAlignment="Right" />
                </Grid>

                <Grid
                    x:Name="GridWarnBeforeGISSelect"
                    Grid.Row="2">

                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="20" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <Label Content="Warn Before GIS Select"
                        x:Name="LabelWarnBeforeGISSelect"
                        Grid.Row="0"
                        Grid.Column="0"
                        Grid.ColumnSpan="2"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center" />

                    <StackPanel
                        Grid.Row="1"
                        Grid.Column="1"
                        Grid.ColumnSpan="2">
                        <ItemsControl ItemsSource="{Binding WarnBeforeGISSelectOptions}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <RadioButton Content="{Binding}"
                                        Margin="0,0,0,5"
                                        GroupName="WarnBeforeGISSelectGroup">
                                        <RadioButton.IsChecked>
                                            <MultiBinding
                                                Converter="{StaticResource multiEqualityConverter}"
                                                Mode="TwoWay">
                                                <!-- First binding: ViewModel property that stores the selected option -->
                                                <Binding
                                                    Mode="TwoWay"
                                                    Path="DataContext.WarnBeforeGISSelect"
                                                    RelativeSource="{RelativeSource AncestorType=Window}"
                                                    ValidatesOnDataErrors="True" />
                                                <!-- Second binding: The value of the current item in the ItemsControl -->
                                                <Binding Path="." />
                                            </MultiBinding>
                                        </RadioButton.IsChecked>
                                    </RadioButton>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </Grid>

                <Grid
                    x:Name="GridSqlPath"
                    Grid.Row="4">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="160" />
                        <ColumnDefinition Width="*" MinWidth="250" />
                        <ColumnDefinition Width="30" />
                    </Grid.ColumnDefinitions>

                    <Label Content="Default Query Directory:"
                        x:Name="LabelSqlPath"
                        Grid.Column="0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center" />

                    <TextBox Text="{Binding SqlPath, ValidatesOnDataErrors=True}"
                        x:Name="TextBoxSqlPath"
                        Grid.Column="1"
                        BorderThickness="1"
                        IsEnabled="False"
                        Tag="ErrorContent"
                        TextAlignment="Left"
                        ToolTip="{Binding SqlPath}"
                        ToolTipService.ShowOnDisabled="True" />

                    <Button Content="..."
                        x:Name="ButtonBrowseSql"
                        Grid.Column="2"
                        Command="{Binding BrowseSqlPathCommand}" />
                </Grid>
            </Grid>

        </Expander>

    </StackPanel>

</UserControl>
